<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KLY Portal</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Orbitron:wght@400;500;700;900&display=swap" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.net.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
</head>
<body class="portal-body">
  <!-- Sound toggle -->
  <div class="sound-toggle" id="soundToggle">
    <i class="fas fa-volume-up"></i>
  </div>
  
  <div class="particles-container" id="particles"></div>
  <div class="grid-overlay"></div>
  <div class="scanlines"></div>
  
  <!-- Floating particles -->
  <div class="floating-particles">
    <div class="particle particle-1"></div>
    <div class="particle particle-2"></div>
    <div class="particle particle-3"></div>
  </div>
  
  <!-- Click particles container -->
  <div id="clickParticles"></div>
  
  <div class="portal-container">
    <!-- Header with animated logo -->
    <div class="portal-header">
      <div class="logo-container" id="logo">
        <div class="logo-grid">
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
          <div class="logo-cell"></div>
        </div>
        <div class="logo-text">KLY</div>
      </div>
      <div class="time-display">
        <span class="time">7:15</span>
        <span class="date">2025.07.28</span>
      </div>
    </div>
    
    <!-- System status indicators -->
    <div class="status-indicators">
      <div class="indicator">
        <div class="indicator-light active"></div>
        <span>Quantum Link</span>
      </div>
      <div class="indicator">
        <div class="indicator-light active"></div>
        <span>Neural Sync</span>
      </div>
      <div class="indicator">
        <div class="indicator-light pulse"></div>
        <span>Data Stream</span>
      </div>
    </div>
    
    <!-- Main content area -->
    <div class="portal-content">
      <!-- Checklist with animated completion -->
      <div class="checklist">
        <div class="checklist-header">
          <i class="fas fa-list-check"></i>
          <h3>System Verification</h3>
        </div>
        <div class="checklist-item" id="checklistItem1">
          <div class="checkbox">
            <div class="checkmark"></div>
          </div>
          <span class="item-text">kellylegacyestates.com</span>
          <span class="item-status">Verified</span>
        </div>
        <div class="checklist-item" id="checklistItem2">
          <div class="checkbox">
            <div class="checkmark"></div>
          </div>
          <span class="item-text">system_status.exe</span>
          <span class="item-status">Running</span>
        </div>
        <div class="checklist-item" id="checklistItem3">
          <div class="checkbox">
            <div class="checkmark"></div>
          </div>
          <span class="item-text">quantum_encryption.dll</span>
          <span class="item-status">Active</span>
        </div>
      </div>
      
      <!-- Access message with animation -->
      <div class="access-message">
        <div class="message-text">
          <span class="text-part">You've unlocked</span>
          <span class="text-part">access with the</span>
          <span class="text-part highlight">Key of Ascension</span>
        </div>
        <div class="message-icon">
          <i class="fas fa-key"></i>
        </div>
      </div>
      
      <!-- Animated divider -->
      <div class="divider">
        <div class="divider-line"></div>
        <div class="divider-dot"></div>
      </div>
      
      <!-- Portal actions with hover effects -->
      <div class="portal-actions">
        <a href="/vault.html" class="btn" id="vaultBtn">
          <span class="btn-icon"><i class="fas fa-lock"></i></span>
          <span class="btn-text">Go to The Vault</span>
          <span class="btn-badge">SECURE</span>
        </a>
        <a href="/academy.html" class="btn" id="academyBtn">
          <span class="btn-icon"><i class="fas fa-graduation-cap"></i></span>
          <span class="btn-text">Access KLY Academy</span>
          <span class="btn-badge">NEW</span>
        </a>
        <a href="/oracle.html" class="btn" id="oracleBtn">
          <span class="btn-icon"><i class="fas fa-eye"></i></span>
          <span class="btn-text">Consult the Oracle</span>
          <span class="btn-badge">LIVE</span>
        </a>
      </div>
      
      <!-- Interactive terminal window -->
      <div class="terminal-window" id="terminalWindow">
        <div class="terminal-header">
          <div class="terminal-controls">
            <span class="control close"></span>
            <span class="control minimize"></span>
            <span class="control expand"></span>
          </div>
          <span class="terminal-title">KLY_TERMINAL</span>
        </div>
        <div class="terminal-content">
          <p>> Initializing KLY protocols...</p>
          <p>> Verifying quantum signatures...</p>
          <p>> Establishing neural link...</p>
          <p>> Access granted: Security clearance level 9</p>
          <p>> Welcome, authorized user</p>
          <p class="blinking-cursor">>_</p>
        </div>
      </div>
    </div>
    
    <!-- Status bar with animated elements -->
    <div class="status-bar">
      <div class="status-item">
        <span class="status-label">KLY Protocol</span>
        <span class="status-value">v2.4.7</span>
      </div>
      <div class="status-item">
        <span class="status-label">Security</span>
        <span class="status-value">Quantum Secure</span>
      </div>
      <div class="status-item">
        <span class="status-label">Location</span>
        <span class="status-value">Tamaquah Nation</span>
      </div>
      <div class="status-item">
        <span class="status-label">Connection</span>
        <span class="status-value">
          <span class="connection-strength">
            <span class="strength-dot"></span>
            <span class="strength-dot"></span>
            <span class="strength-dot"></span>
            <span class="strength-dot"></span>
            <span class="strength-dot"></span>
          </span>
        </span>
      </div>
    </div>
  </div>

  <!-- Hidden audio elements -->
  <audio id="hoverSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-positive-interface-hover-931.mp3" type="audio/mpeg">
  </audio>
  <audio id="clickSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3" type="audio/mpeg">
  </audio>
  <audio id="confirmSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" type="audio/mpeg">
  </audio>
  <audio id="typingSound" preload="auto" loop>
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-male-voice-counting-down-903.mp3" type="audio/mpeg">
  </audio>
  <audio id="ambientSound" preload="auto" loop>
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-ambient-sci-fi-lab-92.mp3" type="audio/mpeg">
  </audio>

  <style>
    /* Previous CSS remains the same, adding new styles below */
    
    /* Sound toggle */
    .sound-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: rgba(10, 10, 10, 0.7);
      border: 1px solid var(--primary);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 10;
      color: var(--primary);
      transition: var(--transition);
    }
    
    .sound-toggle:hover {
      background: rgba(15, 255, 195, 0.2);
      transform: scale(1.1);
    }
    
    .sound-toggle.muted {
      color: #666;
      border-color: #666;
    }
    
    /* Click particles */
    #clickParticles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }
    
    .click-particle {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary);
      pointer-events: none;
      opacity: 0.8;
      transform: translate(-50%, -50%);
      animation: particleFade 1s forwards;
    }
    
    @keyframes particleFade {
      0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
      }
      50% {
        opacity: 0.8;
      }
      100% {
        transform: translate(-50%, -50%) scale(2);
        opacity: 0;
      }
    }
    
    /* Enhanced button effects */
    .btn.clicked {
      animation: buttonClick 0.3s ease;
    }
    
    @keyframes buttonClick {
      0% { transform: scale(1); }
      50% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    
    /* Terminal window shake */
    .terminal-window.shake {
      animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
    
    @keyframes shake {
      10%, 90% { transform: translateX(-1px); }
      20%, 80% { transform: translateX(2px); }
      30%, 50%, 70% { transform: translateX(-3px); }
      40%, 60% { transform: translateX(3px); }
    }
    
    /* Logo hover effect */
    .logo-container:hover .logo-text {
      animation: textGlow 1s infinite alternate;
    }
    
    @keyframes textGlow {
      from { text-shadow: 0 0 5px var(--primary); }
      to { text-shadow: 0 0 15px var(--primary), 0 0 30px var(--primary-light); }
    }
  </style>

  <script>
    // Sound effects
    const sounds = {
      hover: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-positive-interface-hover-931.mp3'], volume: 0.3 }),
      click: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3'], volume: 0.4 }),
      confirm: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3'], volume: 0.5 }),
      typing: new Howl({ 
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-male-voice-counting-down-903.mp3'], 
        volume: 0.2,
        loop: true
      }),
      ambient: new Howl({ 
        src: ['https://assets.mixkit.co/sfx/preview/mixkit-ambient-sci-fi-lab-92.mp3'], 
        volume: 0.1,
        loop: true
      })
    };
    
    // Initialize Vanta.js particles background
    document.addEventListener('DOMContentLoaded', function() {
      const vantaEffect = VANTA.NET({
        el: "#particles",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x0fffc3,
        backgroundColor: 0x0a0a0a,
        points: 12.00,
        maxDistance: 22.00,
        spacing: 18.00
      });
      
      // Start ambient sound
      sounds.ambient.play();
      
      // Sound toggle functionality
      const soundToggle = document.getElementById('soundToggle');
      let soundEnabled = true;
      
      soundToggle.addEventListener('click', function() {
        soundEnabled = !soundEnabled;
        
        if (soundEnabled) {
          Howler.mute(false);
          soundToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
          soundToggle.classList.remove('muted');
        } else {
          Howler.mute(true);
          soundToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
          soundToggle.classList.add('muted');
        }
      });
      
      // Update time display
      function updateTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const year = now.getFullYear();
        const month = (now.getMonth() + 1).toString().padStart(2, '0');
        const day = now.getDate().toString().padStart(2, '0');
        
        document.querySelector('.time-display .time').textContent = `${hours}:${minutes}`;
        document.querySelector('.time-display .date').textContent = `${year}.${month}.${day}`;
      }
      
      updateTime();
      setInterval(updateTime, 60000);
      
      // Animate checklist items with sound
      const checklistItems = [
        document.getElementById('checklistItem1'),
        document.getElementById('checklistItem2'),
        document.getElementById('checklistItem3')
      ];
      
      checklistItems.forEach((item, index) => {
        setTimeout(() => {
          item.querySelector('.checkmark').style.opacity = '1';
          item.style.backgroundColor = 'rgba(15, 255, 195, 0.05)';
          
          // Play confirm sound for each item
          setTimeout(() => {
            sounds.confirm.play();
          }, 200);
          
          setTimeout(() => {
            item.style.backgroundColor = 'transparent';
          }, 500);
        }, index * 500 + 1000);
      });
      
      // Button hover effects with sound
      const buttons = [
        document.getElementById('vaultBtn'),
        document.getElementById('academyBtn'),
        document.getElementById('oracleBtn')
      ];
      
      buttons.forEach(button => {
        button.addEventListener('mouseenter', () => {
          button.style.boxShadow = '0 0 15px rgba(15, 255, 195, 0.5)';
          sounds.hover.play();
        });
        
        button.addEventListener('mouseleave', () => {
          button.style.boxShadow = '';
        });
        
        button.addEventListener('mousedown', () => {
          button.classList.add('clicked');
          sounds.click.play();
          createClickParticles(event);
        });
        
        button.addEventListener('mouseup', () => {
          button.classList.remove('clicked');
        });
      });
      
      // Terminal typing effect with sound
      const terminalLines = document.querySelectorAll('.terminal-content p');
      sounds.typing.play();
      
      terminalLines.forEach((line, index) => {
        const text = line.textContent;
        line.textContent = '';
        
        setTimeout(() => {
          let i = 0;
          const typing = setInterval(() => {
            if (i < text.length) {
              line.textContent += text.charAt(i);
              i++;
            } else {
              clearInterval(typing);
              if (index === terminalLines.length - 2) {
                sounds.typing.stop();
              }
            }
          }, 30);
        }, index * 1000 + 500);
      });
      
      // Terminal window shake on click
      const terminalWindow = document.getElementById('terminalWindow');
      terminalWindow.addEventListener('click', function() {
        this.classList.add('shake');
        sounds.click.play();
        setTimeout(() => {
          this.classList.remove('shake');
        }, 500);
      });
      
      // Logo hover effect
      const logo = document.getElementById('logo');
      logo.addEventListener('mouseenter', function() {
        sounds.hover.play();
      });
      
      // Create click particles
      function createClickParticles(event) {
        const clickParticles = document.getElementById('clickParticles');
        const particleCount = 8;
        
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.classList.add('click-particle');
          
          // Position particles around click point
          const x = event.clientX + (Math.random() - 0.5) * 30;
          const y = event.clientY + (Math.random() - 0.5) * 30;
          
          particle.style.left = `${x}px`;
          particle.style.top = `${y}px`;
          
          // Randomize size and color slightly
          const size = 4 + Math.random() * 4;
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          
          // Random slight color variation
          const hue = 170 + (Math.random() - 0.5) * 20; // 170 is base hue for teal
          particle.style.backgroundColor = `hsl(${hue}, 100%, 60%)`;
          
          clickParticles.appendChild(particle);
          
          // Remove particle after animation
          setTimeout(() => {
            particle.remove();
          }, 1000);
        }
      }
      
      // Add parallax effect to particles on mouse move
      document.addEventListener('mousemove', function(e) {
        const x = e.clientX / window.innerWidth;
        const y = e.clientY / window.innerHeight;
        
        // Update Vanta.js mouse position
        vantaEffect.setMouseMovement(x, y);
        
        // Move floating particles slightly opposite to mouse
        const particles = document.querySelectorAll('.floating-particles .particle');
        particles.forEach((particle, index) => {
          const moveX = (x - 0.5) * 20 * (index + 1);
          const moveY = (y - 0.5) * 20 * (index + 1);
          particle.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
      });
    });
  </script>
</body>
</html>
