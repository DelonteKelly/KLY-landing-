<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SólCoin Founders Circle — Pre-Sale</title>
<meta name="description" content="Secure your SólCoin Founders spot for 0.05 BNB. Only 100 wallets. Lifetime perks, staking boosts, and exclusive Founders NFT.">
<meta name="theme-color" content="#0b0b0d">

<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="SólCoin Founders Circle — Pre-Sale">
<meta property="og:description" content="0.05 BNB • 1 SólCoin per wallet • Only 100 wallets • Lifetime perks.">
<meta property="og:image" content="https://example.com/solcoin-founders-og.jpg">
<meta property="og:url" content="https://example.com/founders">
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="SólCoin Founders Circle — Pre-Sale">
<meta name="twitter:description" content="0.05 BNB • 1 SólCoin per wallet • Only 100 wallets • Lifetime perks.">
<meta name="twitter:image" content="https://example.com/solcoin-founders-og.jpg">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0b0d; --panel:#121216; --text:#f4f4f5; --muted:#b6b6b8;
    --gold:#e6c15a; --gold-2:#aa8b2d; --stroke:#232328; --ok:#3ddc97; --danger:#ff6b6b;
    --pulse: 0 0 10px 2px rgba(230, 193, 90, 0.3);
    --focus:#7dd3fc;
  }
  *{box-sizing:border-box; margin:0; padding:0}
  body{
    min-height:100vh;
    background:radial-gradient(1000px 600px at 50% -10%,#17171b 0%,#0b0b0d 45%,#050506 100%);
    color:var(--text);
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
    line-height:1.5;
  }
  .wrap{
    max-width:1120px;
    margin:0 auto;
    padding:24px;
    animation: fadeIn 0.6s ease-out;
  }
  @keyframes fadeIn { from {opacity:0; transform:translateY(10px)} to {opacity:1; transform:translateY(0)} }

  .hero{
    display:grid;
    grid-template-columns:1.1fr .9fr;
    gap:28px;
    align-items:center;
  }
  .card{
    background:linear-gradient(180deg,#15151a,#0f0f12);
    border:1px solid var(--stroke);
    border-radius:18px;
    padding:28px;
    box-shadow:0 10px 30px rgba(0,0,0,.35);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card:hover { transform: translateY(-2px); box-shadow:0 12px 35px rgba(0,0,0,.45) }

  .badge{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border:1px solid var(--gold-2); border-radius:999px;
    color:var(--gold); font-weight:600; background:rgba(166,135,32,.08); font-size:14px;
  }
  h1{ font-size:clamp(32px, 4vw, 44px); line-height:1.08; margin:14px 0 10px; font-weight:800 }
  h2, h3 { font-weight:700 }
  p{ color:var(--muted); margin:8px 0 0; font-size:15px }

  .cta{ display:flex; gap:12px; margin-top:22px; flex-wrap:wrap; align-items:center }
  .btn{
    appearance:none; border:none; border-radius:14px; padding:14px 22px;
    font-weight:700; cursor:pointer; font-size:15px; transition:all .2s ease;
    display:inline-flex; align-items:center; gap:8px; text-decoration:none;
  }
  .btn:focus-visible{ outline:3px solid var(--focus); outline-offset:2px }
  .btn.primary{
    background:linear-gradient(180deg,var(--gold),#caa43f); color:#1a1a1a; border:1px solid var(--gold-2);
  }
  .btn.primary:hover { transform: translateY(-2px); box-shadow: var(--pulse) }
  .btn.ghost{ background:transparent; color:var(--gold); border:1px solid var(--gold-2) }
  .btn.ghost:hover { background:rgba(166,135,32,.1) }

  .btn.disabled, .btn[aria-disabled="true"]{
    opacity:.55; cursor:not-allowed; pointer-events:none;
    filter: grayscale(30%);
  }

  .pill{
    padding:8px 14px; border-radius:999px; background:#0f0f13; border:1px solid var(--stroke);
    color:var(--muted); font-size:14px; display:inline-flex; align-items:center; gap:6px
  }

  .grid3{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:24px }
  .kpi{
    padding:18px; border:1px solid var(--stroke); border-radius:14px;
    background:linear-gradient(180deg,#15151a,#101014); text-align:center; transition: transform .3s ease;
  }
  .kpi:hover { transform: translateY(-3px) }
  .kpi h3{ margin:6px 0 4px; font-size:22px; color: var(--gold) }
  .kpi span{ color:var(--muted); font-size:13px }

  .progress{ margin-top:18px; height:12px; background:#101015; border:1px solid var(--stroke); border-radius:999px; overflow:hidden }
  .bar{ height:100%; background:linear-gradient(90deg,#f7e08a,#e6c15a,#caa43f); transition: width .5s ease }

  .section{ margin-top:36px }
  .list{ display:grid; gap:12px }
  .list .row{ display:flex; gap:12px; align-items:flex-start }
  .dot{ width:10px; height:10px; border-radius:50%; background:var(--gold); margin-top:7px; flex:0 0 10px }

  .faq{ display:grid; gap:12px; margin-top:16px }
  .q{ padding:16px; border:1px solid var(--stroke); border-radius:12px; background:#111115; transition: transform .2s ease }
  .q:hover { transform: translateX(3px) }
  .q b { color: var(--text) }

  .foot{ margin:40px 0 14px; text-align:center; color:#808087; font-size:13px; line-height:1.6 }

  .pulse { animation: pulse 2s infinite }
  @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(230,193,90,.4)} 70%{box-shadow:0 0 0 10px rgba(230,193,90,0)} 100%{box-shadow:0 0 0 0 rgba(230,193,90,0)} }

  /* Verify badge */
  .verify{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px; border:1px solid var(--stroke);
    background:#0f0f13; color:var(--muted); font-size:13px;
  }
  .verify svg{ flex:0 0 16px }
  .verify.ok{ border-color: rgba(61,220,151,.35); color:#bff8e3 }
  .verify.warn{ border-color: rgba(255,107,107,.35); color:#ffd6d6 }
  .verify .small{ opacity:.9 }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    *{ animation: none !important; transition: none !important; scroll-behavior: auto !important }
  }
  @media (max-width:960px){
    .hero{grid-template-columns:1fr}
    .grid3{grid-template-columns:1fr 1fr}
    .kpi h3{font-size:20px}
  }
  @media (max-width:600px){
    .grid3{grid-template-columns:1fr}
    .wrap{padding:18px}
    .card{padding:20px}
    .cta{gap:10px}
  }

  /* --- Live Integrations add-ons --- */
  .grid2{ display:grid; grid-template-columns:repeat(2,1fr); gap:16px; margin-top:24px }
  .price{ font-size:28px; font-weight:800; margin:8px 0 }
  .meta{ display:flex; gap:10px; flex-wrap:wrap; margin:8px 0 14px }
  .chip{ border:1px solid var(--stroke); border-radius:999px; padding:6px 10px; font-weight:600; color:var(--muted); font-size:12px }
  .supply-badge{
    position:absolute; right:14px; top:14px;
    background:linear-gradient(180deg,var(--gold),var(--gold-2)); color:#14120a;
    border-radius:999px; padding:6px 10px; font-weight:800; font-size:12px
  }
  .fine{ font-size:13px; color:var(--muted) }
  @media (max-width:960px){ .grid2{ grid-template-columns:1fr } }
</style>

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Product",
  "name":"SólCoin Founders Circle — Phase 1",
  "description":"Claim 1 SólCoin for 0.05 BNB. 100 wallets max. Includes lifetime perks and Founders NFT.",
  "offers":{
    "@type":"Offer",
    "price":"0.05",
    "priceCurrency":"BNB",
    "availability":"https://schema.org/InStock",
    "url":"https://thirdweb.com/binance/0x7a732Ae6b2Db2ceACc3Ffe6F63F3B9B0Ce94A026/claim"
  }
}
</script>
</head>
<body>
  <div class="wrap">
    <!-- HERO -->
    <div class="hero">
      <div class="card" aria-labelledby="title">
        <span class="badge">🔑 SólCoin Founders Circle — Phase 1</span>
        <h1 id="title">Secure your spot • <span style="color:var(--gold)">0.05 BNB</span> • Only 100 wallets</h1>
        <p>Founders get lifetime perks: staking boost, private academy access, and the first wave of SólCoin utility. Price is locked for this phase only.</p>

        <div class="cta">
          <a class="btn primary pulse disabled" id="claimBtn" href="https://thirdweb.com/binance/0x7a732Ae6b2Db2ceACc3Ffe6F63F3B9B0Ce94A026/claim" target="_blank" rel="noopener noreferrer" aria-disabled="true">
            <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 .001-16.001A8 8 0 0 1 12 20Z" fill="#1a1a1a"/><path d="M12.5 7H11v6l5.2 3.2.8-1.3L12.5 12.2V7Z" fill="#1a1a1a"/></svg>
            Claim on Thirdweb
          </a>
          <button class="btn ghost" id="copyBtn" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H4C2.9 1 2 1.9 2 3v14h2V3h12V1Zm3 4H8C6.9 5 6 5.9 6 7v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2Zm0 16H8V7h11v14Z" fill="#e6c15a"/></svg>
            Copy Claim Link
          </button>
          <span class="pill" id="countdown" aria-live="polite" aria-atomic="true">
            <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 .001-16.001A8 8 0 0 1 12 20Z" fill="#b6b6b8"/><path d="M12.5 7H11v6l5.2 3.2.8-1.3L12.5 12.2V7Z" fill="#b6b6b8"/></svg>
            Ends soon…
          </span>
          <!-- Verify badge -->
          <span id="verifyBadge" class="verify" title="We verify the network, address, code presence and contract interface before enabling the Claim button.">
            <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="#b6b6b8"/></svg>
            <span class="small">Verifying…</span>
          </span>
        </div>

        <div class="grid3" role="status" aria-live="polite" aria-atomic="true">
          <div class="kpi">
            <h3>0.05 BNB</h3>
            <span>Cost per wallet</span>
          </div>
          <div class="kpi">
            <h3 id="tokensPerWallet">1 SólCoin</h3>
            <span>Tokens per wallet</span>
          </div>
          <div class="kpi">
            <h3 id="spotsLeft">100</h3>
            <span>Spots remaining</span>
          </div>
        </div>

        <div class="progress" title="Spots filled">
          <div class="bar" id="fillBar" style="width:0%"></div>
        </div>
        <p style="margin-top:8px">Spots filled: <b id="filledText">0</b>/100 • Live while supplies last.</p>
      </div>

      <div class="card">
        <h2 style="margin:4px 0 12px;font-size:22px">Founders Perks</h2>
        <div class="list">
          <div class="row">
            <div class="dot" aria-hidden="true"></div>
            <div><b>Lifetime staking boost</b> <span title="Exact boost percentage to be announced" style="border:1px dotted var(--muted); border-radius:5px; padding:0 6px; color:var(--muted)">ℹ️</span><br><span style="color:var(--muted);font-size:14px">Higher yields in SólCoin staking rewards</span></div>
          </div>
          <div class="row">
            <div class="dot" aria-hidden="true"></div>
            <div><b>Private Academy access</b><br><span style="color:var(--muted);font-size:14px">Premium modules for holders</span></div>
          </div>
          <div class="row">
            <div class="dot" aria-hidden="true"></div>
            <div><b>Priority mints</b> + early drops<br><span style="color:var(--muted);font-size:14px">First access to SólCoin ecosystem projects</span></div>
          </div>
          <div class="row">
            <div class="dot" aria-hidden="true"></div>
            <div><b>OG role</b> in Discord<br><span style="color:var(--muted);font-size:14px">Gated channels & founder AMAs</span></div>
          </div>
          <div class="row">
            <div class="dot" aria-hidden="true"></div>
            <div><b>Exclusive Founders NFT</b><br><span style="color:var(--muted);font-size:14px">Digital collectible proving your status</span></div>
          </div>
        </div>

        <div class="section">
          <h2 style="margin:0 0 12px;font-size:22px">How it works</h2>
          <div class="list">
            <div class="row"><div class="dot" aria-hidden="true"></div><div>Tap <b>Claim on Thirdweb</b>, connect wallet, select <b>1 token</b></div></div>
            <div class="row"><div class="dot" aria-hidden="true"></div><div>Pay <b>0.05 BNB</b>. Token delivers instantly to your wallet</div></div>
            <div class="row"><div class="dot" aria-hidden="true"></div><div>Use your SólCoin to unlock staking and holder utilities</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- LIVE INTEGRATIONS -->
    <div class="section">
      <div class="card" style="margin-bottom:16px">
        <h2 style="margin:0 0 6px;font-size:22px">Live Integrations</h2>
        <p>Mint the token and claim the scrolls — both on BNB Chain. Prices and supply are enforced on-chain.</p>
      </div>

      <div class="grid2">
        <!-- SólCoin (Token) -->
        <article class="card" id="solcoin-card" aria-labelledby="solcoin-title">
          <span class="badge">Token</span>
          <h3 id="solcoin-title" style="margin-top:10px">SólCoin</h3>
          <div class="meta">
            <span class="chip">Price: 0.05 BNB</span>
            <span class="chip">Chain: BNB Smart Chain</span>
          </div>
          <div class="price">0.05 BNB</div>
          <p class="fine" style="margin-top:6px">Gas applies. Slippage per wallet settings.</p>
          <div class="cta" style="margin-top:14px">
            <a class="btn primary" id="btnMintSolLive" href="https://thirdweb.com/binance/0x7a732Ae6b2Db2ceACc3Ffe6F63F3B9B0Ce94A026/claim" target="_blank" rel="noopener noreferrer">Buy on Thirdweb</a>
            <button class="btn ghost" id="btnSolTokenomics" type="button">View Tokenomics</button>
          </div>
        </article>

        <!-- SólCoin NFT Scrolls (ERC1155 Drop) -->
        <article class="card" id="scrolls-card" aria-labelledby="scrolls-title" style="position:relative">
          <span class="supply-badge"><span id="scrollsMinted">0</span>/<span id="scrollsMax">111</span></span>
          <span class="badge">NFT Collection</span>
          <h3 id="scrolls-title" style="margin-top:10px">SólCoin NFT Scrolls</h3>
          <div class="meta">
            <span class="chip">Price: 0.5 BNB</span>
            <span class="chip">Supply: 111</span>
            <span class="chip">Chain: BNB Smart Chain</span>
          </div>

          <div class="price">0.5 BNB</div>
          <p class="fine" style="margin-top:6px">Limited to 111 total — claim via Thirdweb.</p>

          <div class="cta" style="margin-top:14px; align-items:center">
            <a class="btn primary pulse disabled" id="btnMintScrolls"
               href="https://thirdweb.com/binance/0x97A10b3889BdC8EE5EF937ebb75b91Ab1a7AA1F0/claim"
               target="_blank" rel="noopener noreferrer" aria-disabled="true">
              Mint on Thirdweb
            </a>
            <button class="btn ghost" id="btnViewScrolls" type="button">View Collection</button>

            <!-- Verify badge for NFT -->
            <span id="verifyBadgeScrolls" class="verify" title="We verify the network, address, code presence and contract interface before enabling the Mint button.">
              <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="#b6b6b8"/></svg>
              <span class="small">Verifying…</span>
            </span>
          </div>

          <p class="fine" style="margin-top:10px">
            Minted: <b id="scrollsMintedInline">0</b>/<b id="scrollsMaxInline">111</b>
          </p>
          <div class="progress" title="Scrolls claimed">
            <div class="bar" id="scrollsBar" style="width:0%"></div>
          </div>
        </article>
      </div>
    </div>

    <!-- FAQ / TRUST -->
    <div class="section">
      <div class="card">
        <h2 style="margin:0 0 12px;font-size:22px">FAQ</h2>
        <div class="faq">
          <div class="q"><b>What blockchain is this on?</b><br><span style="color:var(--muted);font-size:14px">BNB Smart Chain (BEP-20 / BEP-721/1155). Make sure your wallet is on BNB network.</span></div>
          <div class="q"><b>What's the maximum supply for this phase?</b><br><span style="color:var(--muted);font-size:14px">100 wallets maximum for Phase 1 of SólCoin Founders. Each wallet can claim exactly 1 SólCoin for 0.05 BNB.</span></div>
          <div class="q"><b>How many SólCoin NFT Scrolls exist?</b><br><span style="color:var(--muted);font-size:14px">Fixed supply of 111. Each scroll mints for 0.5 BNB while available.</span></div>
          <div class="q"><b>Where do purchases happen?</b><br><span style="color:var(--muted);font-size:14px">On the official Thirdweb claim pages linked above. Always verify the contract addresses.</span></div>
          <div class="q"><b>Will there be another phase after this?</b><br><span style="color:var(--muted);font-size:14px">Yes — price increases after Phase 1 fills completely.</span></div>
          <div class="q"><b>When will I receive my Founder benefits?</b><br><span style="color:var(--muted);font-size:14px">All benefits unlock immediately after claiming, except the Founders NFT airdrop which will arrive within 7 days.</span></div>
        </div>
      </div>
    </div>

    <p class="foot">
      Never trust DMs. We will never ask for your seed phrase.<br>
      Always verify contract addresses before connecting your wallet.<br>
      © SólCoin Legacy • Not financial advice
    </p>
  </div>

<!-- ethers UMD -->
<script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js" crossorigin="anonymous"></script>
<script>
  // ==== CONFIG (Founders ERC20 Drop) ====
  const TOTAL_SPOTS = 100;                       // max wallets in this phase
  const TOKENS_PER_WALLET = 1;                   // 1 SólCoin per wallet
  const CLAIM_URL = "https://thirdweb.com/binance/0x7a732Ae6b2Db2ceACc3Ffe6F63F3B9B0Ce94A026/claim";
  const END_ISO_FALLBACK = "2025-08-22T23:59:00Z"; // used if next phase start unavailable

  // Contract read settings (BNB chain)
  const RPC_URL = "https://bsc-dataseed.binance.org/"; // BNB Mainnet
  const CHAIN_ID = 56; // BNB chain id
  const CONTRACT_ADDRESS = "0x7a732Ae6b2Db2ceACc3Ffe6F63F3B9B0Ce94A026";

  // Minimal Thirdweb ERC20Drop read ABI
  const ERC20_DROP_ABI = [
    "function getActiveClaimConditionId() view returns (uint256)",
    "function getClaimConditionById(uint256) view returns (tuple(uint256 startTimestamp,uint256 maxClaimableSupply,uint256 supplyClaimed,uint256 quantityLimitPerTransaction,bytes32 merkleRoot,uint256 pricePerToken,address currency))",
    "function decimals() view returns (uint8)"
  ];

  // ==== CONFIG (SólCoin NFT Scrolls — ERC1155 Drop) ====
  const SCROLLS_CONTRACT = "0x97A10b3889BdC8EE5EF937ebb75b91Ab1a7AA1F0";
  const SCROLLS_THIRDWEB = "https://thirdweb.com/binance/0x97A10b3889BdC8EE5EF937ebb75b91Ab1a7AA1F0/claim";
  const SCROLLS_MAX = 111;
  let   SCROLLS_TOKEN_ID = 0; // set to the live tokenId for the Scrolls

  // Minimal read ABI for ERC1155Drop
  const ERC1155_DROP_READ_ABI = [
    "function getActiveClaimConditionId(uint256 _tokenId) view returns (uint256)",
    "function getClaimConditionById(uint256 _tokenId, uint256 _conditionId) view returns (tuple(uint256 startTimestamp,uint256 maxClaimableSupply,uint256 supplyClaimed,uint256 quantityLimitPerWallet,bytes32 merkleRoot,uint256 pricePerToken,address currency,string metadata))",
    "function nextTokenIdToMint() view returns (uint256)"
  ];

  // ==== DOM refs (Founders) ====
  const spotsLeftEl = document.getElementById('spotsLeft');
  const filledText  = document.getElementById('filledText');
  const bar         = document.getElementById('fillBar');
  const claimBtn    = document.getElementById('claimBtn');
  const countdownEl = document.getElementById('countdown');
  const tokensPerWalletEl = document.getElementById('tokensPerWallet');
  const verifyBadge = document.getElementById('verifyBadge');

  let verified = false;
  claimBtn.addEventListener('click', (e) => {
    if (!verified){
      e.preventDefault();
      alert("Hold on — verifying the contract and network before opening the claim page.");
    }
  });
  claimBtn.href = CLAIM_URL;

  let spotsClaimed = 0;           // wallets (not tokens)
  let dynamicEndMs = null;        // inferred from next phase start
  let tokenDecimals = 18;         // will fetch from-chain
  let isAlmostSoldOut = false;

  function setVerifyState(el, state, msg){
    // state: 'loading' | 'ok' | 'warn'
    if (!el) return;
    el.classList.remove('ok','warn');
    if (state === 'ok'){
      el.classList.add('ok');
      el.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="12" r="10" fill="#103b33" stroke="#3ddc97" stroke-width="2"/>
          <path d="M8.5 12.5l2.5 2.5 4.5-5" fill="none" stroke="#3ddc97" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="small">${msg || "Verified: address & network"}</span>`;
    } else if (state === 'warn'){
      el.classList.add('warn');
      el.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="12" r="10" fill="#3b0f0f" stroke="#ff6b6b" stroke-width="2"/>
          <path d="M12 7v6M12 16.5v.5" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="small">${msg || "Verification failed"}</span>`;
    } else {
      el.classList.remove('ok','warn');
      el.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="#b6b6b8"/></svg>
        <span class="small">${msg || "Verifying…"}</span>`;
    }
  }

  function enableClaim(btn){
    btn.classList.remove('disabled');
    btn.setAttribute('aria-disabled','false');
  }
  function disableClaim(btn){
    btn.classList.add('disabled');
    btn.setAttribute('aria-disabled','true');
  }

  function renderSpots(){
    const left = Math.max(0, TOTAL_SPOTS - spotsClaimed);
    const pct  = Math.min(100, (spotsClaimed / TOTAL_SPOTS) * 100);

    if (spotsLeftEl) spotsLeftEl.textContent = left.toString();
    if (filledText)  filledText.textContent  = spotsClaimed.toString();
    if (bar)         bar.style.width         = pct + "%";

    if (left <= 10 && !isAlmostSoldOut) {
      isAlmostSoldOut = true;
      spotsLeftEl.style.color = "var(--gold)";
      spotsLeftEl.style.animation = "pulse 1.5s infinite";
      const prog = document.querySelector('.progress');
      if (prog) prog.style.boxShadow = "var(--pulse)";
    }
  }

  async function fetchLivePhase(){
    try {
      const provider = new ethers.providers.JsonRpcProvider(RPC_URL, { name: 'bnb', chainId: CHAIN_ID });
      const c = new ethers.Contract(CONTRACT_ADDRESS, ERC20_DROP_ABI, provider);

      try { tokenDecimals = await c.decimals(); } catch(_) {}

      const id   = await c.getActiveClaimConditionId();
      const cond = await c.getClaimConditionById(id);

      const claimedTokens = cond.supplyClaimed;
      const claimedHuman  = Number(ethers.utils.formatUnits(claimedTokens, tokenDecimals));
      const walletsClaimed = Math.floor(claimedHuman / TOKENS_PER_WALLET);

      spotsClaimed = Math.max(0, Math.min(TOTAL_SPOTS, walletsClaimed));
      renderSpots();

      try {
        const nextCond = await c.getClaimConditionById(id.add(1));
        const nextStartMs = Number(nextCond.startTimestamp) * 1000;
        if (!Number.isNaN(nextStartMs) && nextStartMs > Date.now()) {
          dynamicEndMs = nextStartMs;
        }
      } catch (_e) {
        dynamicEndMs = null;
      }
    } catch(e) {
      console.error("Failed to fetch phase data:", e);
    }
  }

  function tick(){
    const fallbackMs = new Date(END_ISO_FALLBACK).getTime();
    const endMs = dynamicEndMs || fallbackMs;

    if (!endMs || Number.isNaN(endMs)) {
      countdownEl.textContent = "⏳ Closing soon";
      return;
    }
    const now = Date.now();
    const d = endMs - now;
    if (d <= 0){
      countdownEl.textContent = "⏳ Closing soon";
      return;
    }
    const days = Math.floor(d / 86400000);
    const hrs  = Math.floor((d % 86400000) / 3600000);
    const min  = Math.floor((d % 3600000) / 60000);

    if (days === 0) {
      countdownEl.style.color = "var(--gold)";
      countdownEl.style.borderColor = "var(--gold-2)";
    } else {
      countdownEl.style.color = "var(--muted)";
      countdownEl.style.borderColor = "var(--stroke)";
    }

    countdownEl.innerHTML = `
      <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 .001-16.001A8 8 0 0 1 12 20Z" fill="${days===0?'#e6c15a':'#b6b6b8'}"/>
        <path d="M12.5 7H11v6l5.2 3.2.8-1.3L12.5 12.2V7Z" fill="${days===0?'#e6c15a':'#b6b6b8'}"/>
      </svg> Ends in ${days}d ${hrs}h ${min}m`;
  }

  // Polling control for Founders (pause when hidden to save RPC)
  let pollTimer = null, tickTimer = null;
  function startTimers(){
    if (!pollTimer) pollTimer = setInterval(fetchLivePhase, 30000);
    if (!tickTimer) tickTimer = setInterval(tick, 30000);
  }
  function stopTimers(){
    clearInterval(pollTimer); pollTimer = null;
    clearInterval(tickTimer); tickTimer = null;
  }
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) stopTimers(); else { fetchLivePhase(); tick(); startTimers(); }
  });

  // Copy link for Founders token
  document.getElementById('copyBtn').addEventListener('click', async () => {
    const btn = document.getElementById('copyBtn');
    try {
      await navigator.clipboard.writeText(CLAIM_URL);
      btn.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 16.17 4.83 12 3.41 13.41 9 19 21 7 19.59 5.59 9 16.17Z" fill="#3ddc97"/></svg> Copied!`;
    } catch(e){
      const ok = window.prompt("Copy the claim link:", CLAIM_URL);
      if (ok !== null) {
        btn.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 16.17 4.83 12 3.41 13.41 9 19 21 7 19.59 5.59 9 16.17Z" fill="#3ddc97"/></svg> Copied?`;
      }
    } finally {
      setTimeout(() => {
        btn.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H4C2.9 1 2 1.9 2 3v14h2V3h12V1Zm3 4H8C6.9 5 6 5.9 6 7v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2Zm0 16H8V7h11v14Z" fill="#e6c15a"/></svg> Copy Claim Link`;
      }, 2000);
    }
  });

  // IntersectionObserver reveal (cards & faq)
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = "1";
        entry.target.style.transform = "translateY(0)";
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.card, .q').forEach((el, i) => {
    el.style.opacity = "0";
    el.style.transform = "translateY(20px)";
    el.style.transition = `all 0.4s ease ${i * 0.08}s`;
    observer.observe(el);
  });

  /* --- Verification (Founders ERC20Drop) -------------------------------- */
  async function verifyEverything(){
    try{
      setVerifyState(verifyBadge, 'loading', 'Verifying…');
      disableClaim(claimBtn);

      // 1) URL parse
      const u = new URL(CLAIM_URL);
      const parts = u.pathname.split('/').filter(Boolean);
      if (parts[0] !== 'binance') throw new Error('Expected Thirdweb network slug "binance"');
      const urlAddress = (parts[1] || '').toLowerCase();
      if (!urlAddress || urlAddress !== CONTRACT_ADDRESS.toLowerCase()) {
        throw new Error('Thirdweb URL contract does not match configured address');
      }

      // 2) Network + 3) Code
      const provider = new ethers.providers.JsonRpcProvider(RPC_URL, { name: 'bnb', chainId: CHAIN_ID });
      const net = await provider.getNetwork();
      if (net.chainId !== CHAIN_ID) throw new Error(`Unexpected chain id ${net.chainId}; expected ${CHAIN_ID}`);
      const code = await provider.getCode(CONTRACT_ADDRESS);
      if (!code || code === '0x') throw new Error('No contract code found at the token address');

      // 4) Interface probe
      const c = new ethers.Contract(CONTRACT_ADDRESS, ERC20_DROP_ABI, provider);
      await Promise.all([
        c.getActiveClaimConditionId().then(()=>true).catch(()=>true),
        c.decimals().then(()=>true).catch(()=>true)
      ]);

      setVerifyState(verifyBadge, 'ok', 'Verified on BNB • Address matches');
      enableClaim(claimBtn);
    }catch(err){
      console.error('Verify (Founders) failed:', err);
      setVerifyState(verifyBadge, 'warn', err && err.message ? err.message : 'Verification failed');
      disableClaim(claimBtn);
    }
  }

  /* --- NFT Scrolls: wiring & verification -------------------------------- */

  // DOM refs for Scrolls
  const btnMintScrolls = document.getElementById('btnMintScrolls');
  const verifyBadgeScrolls = document.getElementById('verifyBadgeScrolls');
  const scrollsMintedTop = document.getElementById('scrollsMinted');
  const scrollsMintedInline = document.getElementById('scrollsMintedInline');
  const scrollsMaxTop = document.getElementById('scrollsMax');
  const scrollsMaxInline = document.getElementById('scrollsMaxInline');
  const scrollsBar = document.getElementById('scrollsBar');

  // prevent navigation until verified
  btnMintScrolls.addEventListener('click', (e)=>{
    if (btnMintScrolls.getAttribute('aria-disabled') === 'true') {
      e.preventDefault();
      alert("Hold on — verifying the NFT contract and network before opening the mint page.");
    }
  });

  function enableScrollsClaim(){
    enableClaim(btnMintScrolls);
  }
  function disableScrollsClaim(){
    disableClaim(btnMintScrolls);
  }

  // Set fixed max labels
  if (scrollsMaxTop) scrollsMaxTop.textContent = SCROLLS_MAX.toString();
  if (scrollsMaxInline) scrollsMaxInline.textContent = SCROLLS_MAX.toString();

  async function verifyScrollsEverything(){
    try{
      setVerifyState(verifyBadgeScrolls, 'loading', 'Verifying…');
      disableScrollsClaim();

      // 1) URL parse
      const u = new URL(SCROLLS_THIRDWEB);
      const parts = u.pathname.split('/').filter(Boolean); // ["binance","0x...","claim"]
      if (parts[0] !== 'binance') throw new Error('Expected Thirdweb network slug "binance"');
      const urlAddress = (parts[1] || '').toLowerCase();
      if (!urlAddress || urlAddress !== SCROLLS_CONTRACT.toLowerCase()) {
        throw new Error('Thirdweb URL contract does not match configured address');
      }

      // 2) Chain & code
      const provider = new ethers.providers.JsonRpcProvider(RPC_URL, { name: 'bnb', chainId: CHAIN_ID });
      const net = await provider.getNetwork();
      if (net.chainId !== CHAIN_ID) throw new Error(`Unexpected chain id ${net.chainId}; expected ${CHAIN_ID}`);
      const code = await provider.getCode(SCROLLS_CONTRACT);
      if (!code || code === '0x') throw new Error('No contract code found at the NFT address');

      // 3) ERC1155Drop interface probe (light)
      const c1155 = new ethers.Contract(SCROLLS_CONTRACT, ERC1155_DROP_READ_ABI, provider);
      try {
        const condId = await c1155.getActiveClaimConditionId(SCROLLS_TOKEN_ID);
        await c1155.getClaimConditionById(SCROLLS_TOKEN_ID, condId);
      } catch (_) {
        // Still consider verified if contract exists; counter may be disabled if no active condition
      }

      setVerifyState(verifyBadgeScrolls, 'ok', 'Verified on BNB • Address matches');
      enableScrollsClaim();
    }catch(err){
      console.error('Verify (Scrolls) failed:', err);
      setVerifyState(verifyBadgeScrolls, 'warn', err && err.message ? err.message : 'Verification failed');
      disableScrollsClaim();
    }
  }

  // Optional: live minted counter from claim condition for SCROLLS_TOKEN_ID
  async function updateScrollsLiveCounter(){
    try{
      const provider = new ethers.providers.JsonRpcProvider(RPC_URL, { name: 'bnb', chainId: CHAIN_ID });
      const c1155 = new ethers.Contract(SCROLLS_CONTRACT, ERC1155_DROP_READ_ABI, provider);

      // Try to use given tokenId; fallback guess if something odd
      let tokenId = SCROLLS_TOKEN_ID;
      if (tokenId == null) {
        try { await c1155.nextTokenIdToMint(); tokenId = 0; }
        catch(_) { tokenId = 0; }
      }

      const condId = await c1155.getActiveClaimConditionId(tokenId);
      const cond   = await c1155.getClaimConditionById(tokenId, condId);

      const claimed = Number(cond.supplyClaimed.toString());
      const maxCond = Number(cond.maxClaimableSupply.toString());
      const max = Math.min(SCROLLS_MAX, maxCond || SCROLLS_MAX);
      const shownClaimed = Math.min(claimed, SCROLLS_MAX);
      const pct = Math.max(0, Math.min(100, (shownClaimed / max) * 100));

      if (scrollsMintedTop) scrollsMintedTop.textContent = String(shownClaimed);
      if (scrollsMintedInline) scrollsMintedInline.textContent = String(shownClaimed);
      if (scrollsBar) scrollsBar.style.width = pct + "%";
    }catch(e){
      // Non-blocking if no active condition yet or view reverts
      console.warn("Scrolls live counter read failed:", e);
    }
  }

  // Init Founders
  tokensPerWalletEl.textContent = `${TOKENS_PER_WALLET} SólCoin`;
  renderSpots();
  fetchLivePhase().then(tick);
  verifyEverything();
  startTimers();

  // Init Scrolls (NFT)
  verifyScrollsEverything();
  updateScrollsLiveCounter();
  setInterval(updateScrollsLiveCounter, 45000);

  // Tokenomics placeholder
  document.getElementById('btnSolTokenomics').addEventListener('click', ()=>{
    const el = document.getElementById('tokenomics');
    if (el) el.scrollIntoView({ behavior:'smooth', block:'start' });
    else alert("Tokenomics section coming online.");
  });

  // Collection link placeholder
  document.getElementById('btnViewScrolls').addEventListener('click', ()=>{
    alert("Collection link coming online.");
  });
</script>
</body>
</html>
