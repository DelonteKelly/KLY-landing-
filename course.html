<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KLY Legacy Course</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #050505;
      color: #e0e0e0;
      font-family: 'Rajdhani', sans-serif;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    h2 {
      font-family: 'Orbitron', sans-serif;
      color: #00ffe7;
    }
    section {
      background: rgba(0, 255, 231, 0.05);
      border: 1px solid rgba(0, 255, 231, 0.15);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 800px;
      box-shadow: 0 0 30px rgba(0, 255, 231, 0.1);
    }
    button {
      background: linear-gradient(135deg, #00ffe7, #ff00aa);
      color: #000;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      margin-top: 1rem;
      box-shadow: 0 0 10px rgba(0, 255, 231, 0.3);
    }
    button:hover {
      box-shadow: 0 0 20px rgba(0, 255, 231, 0.5);
      transform: scale(1.02);
    }
    .back-button {
      background: linear-gradient(135deg, #ff00aa, #00ffe7);
      color: #000;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      margin-top: 1rem;
      margin-right: 1rem;
      box-shadow: 0 0 10px rgba(255, 0, 170, 0.3);
    }
    .back-button:hover {
      box-shadow: 0 0 20px rgba(255, 0, 170, 0.5);
      transform: scale(1.02);
    }
    .module {
      transition: opacity 0.5s ease-in-out;
    }
    .hidden {
      display: none;
    }
    .module.active {
      opacity: 1;
    }
    .status { 
      margin-top: 1rem; 
      font-weight: bold; 
      color: #00ff99; 
    }
    .module-title { 
      font-size: 1.8rem; 
      margin-bottom: 1rem; 
    }
    .module-text { 
      margin-bottom: 1rem; 
      color: #ccc; 
    }
    img {
      max-width: 250px;
      margin-top: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 255, 231, 0.3);
    }
  </style>
</head>
<body>

<section id="accessPanel">
  <h2>KLY Legacy Course</h2>
  <p>Complete the journey. Unlock legacy knowledge. Mint your NFT certification.</p>
  <button onclick="connectWallet()">Connect Wallet</button>
  <button onclick="verifyAccess()">Verify Access (500 KLY)</button>
  <p id="accessStatus" class="status"></p>
</section>

<div id="module1" class="hidden">
  <h2 class="module-title">Module 1: Web3 Foundations</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Web3 is not just the next version of the internetâ€”it's a complete reimagining of how ownership, identity, and value move online. In this module, you'll gain a foundational understanding of what Web3 is, how it works, and why it matters.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    â€¢ The evolution from Web1 â†’ Web2 â†’ Web3<br>
    â€¢ The role of decentralization in empowering users<br>
    â€¢ Blockchain basics: nodes, consensus, and immutability<br>
    â€¢ Wallets, private keys, and digital identity<br>
    â€¢ Web3 tools: ENS, IPFS, DAOs, and more
  </p>
  <hr>
  <p class="module-text"><strong>1. Web1, Web2, and Web3: The Shift in Power</strong><br>
    â€¢ Web1 (Read-Only): Static websites, early internet, limited interaction.<br>
    â€¢ Web2 (Read + Write): Platforms like Facebook, YouTube, Amazon allow content creation but centralize power and data ownership.<br>
    â€¢ Web3 (Read + Write + Own): Users own their data, assets, and identity. No middlemenâ€”just protocols and smart contracts.<br><br>
    Web3 gives individuals the tools to build, trade, and govern without centralized permission.
  </p>
  <hr>
  <p class="module-text"><strong>2. What Makes Web3 Different?</strong><br>
    Web3 runs on blockchainsâ€”distributed networks that record transactions without relying on a single authority. This enables trustless systems where code replaces institutions.<br><br>
    You'll learn:<br>
    â€¢ How consensus (Proof of Work / Stake) secures networks<br>
    â€¢ Why transparency and immutability build trust<br>
    â€¢ The power of on-chain verifiability for assets and identity
  </p>
  <hr>
  <p class="module-text"><strong>3. Wallets, Private Keys, and Your Digital Identity</strong><br>
    A Web3 wallet like MetaMask isn't just for holding cryptoâ€”it's your passport to the decentralized world.<br>
    â€¢ Your address is your public identity.<br>
    â€¢ Your private key gives you control (never share it).<br>
    â€¢ You'll use wallets to log in, sign contracts, manage assets, and vote in DAOs.<br><br>
    Ownership begins with custodyâ€”and in Web3, you are your own bank.
  </p>
  <hr>
  <p class="module-text"><strong>4. Tools That Power the Ecosystem</strong><br>
    Here are core tools that bring Web3 to life:<br>
    â€¢ ENS (Ethereum Name Service): Human-readable wallet addresses (e.g., yourname.eth).<br>
    â€¢ IPFS: A decentralized file system for hosting websites, media, and data.<br>
    â€¢ DAOs: Organizations governed by token holders, not CEOs.<br>
    â€¢ Soulbound Tokens: Non-transferable NFTs tied to achievements or credentials (like this course certification).<br><br>
    These tools form the foundation for the KLY ecosystem.
  </p>
  <hr>
  <p class="module-text"><strong>5. Why It Matters: The Mission of Web3</strong><br>
    Web3 isn't just about money or techâ€”it's about freedom, ownership, and opportunity.<br>
    â€¢ In Web2, you are the product.<br>
    â€¢ In Web3, you are the ownerâ€”of your assets, your data, your digital destiny.<br><br>
    The future belongs to those who understand and harness this shift.
  </p>
  <hr>
  <p class="module-text"><em>Next: Tokenization (Module 2)</em><br>
    Now that you understand the infrastructure and philosophy of Web3, it's time to learn how tokens bring this world to life.<br><br>
    â†’ Click "Next" to continue to Module 2.
  </p>
  <button onclick="showNextModule(2)">Next</button>
</div>
  
<div id="module2" class="hidden">
  <h2 class="module-title">Module 2: Tokenization</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Tokenization is the engine of Web3. It allows us to represent value, ownership, access, and identity on-chain in programmable form. In this module, you'll learn how tokens transform systems, empower creators, and fuel entire ecosystems.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    â€¢ What tokens are and how they work<br>
    â€¢ ERC standards (ERC-20, ERC-721, ERC-1155)<br>
    â€¢ Token functions: minting, burning, transferring<br>
    â€¢ Use cases: governance, access, rewards, equity<br>
    â€¢ Designing tokenomics for sustainability
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is a Token?</strong><br>
    A token is a digital representation of value built on a blockchain. It can be:<br>
    â€¢ Fungible (interchangeable, like money â€“ e.g., ERC-20)<br>
    â€¢ Non-fungible (unique, like art or ID â€“ e.g., ERC-721)<br>
    â€¢ Semi-fungible (multi-use items â€“ e.g., ERC-1155)<br><br>
    Tokens act as digital building blocks that give users utility, ownership, and participation rights.
  </p>
  <hr>
  <p class="module-text"><strong>2. Token Standards Explained</strong><br>
    â€¢ <strong>ERC-20:</strong> The most common standard for fungible tokens (like KLY). Every token is equal in value and function.<br>
    â€¢ <strong>ERC-721:</strong> Used for NFTs. Each token has unique metadata and value (e.g., certificates, collectibles).<br>
    â€¢ <strong>ERC-1155:</strong> Combines fungible and non-fungible logic in one contract. Ideal for gaming, coupons, and bundled assets.<br><br>
    Understanding standards helps you decide how to design your project's token system.
  </p>
  <hr>
  <p class="module-text"><strong>3. Core Token Mechanics</strong><br>
    Every token has the ability to:<br>
    â€¢ Mint: Create new tokens (with optional permissions)<br>
    â€¢ Burn: Remove tokens from circulation<br>
    â€¢ Transfer: Move tokens between wallets<br>
    â€¢ Approve/Spend: Allow contracts to move tokens on your behalf<br><br>
    Mastering these functions allows you to build logic that reflects your business goals, incentives, or governance needs.
  </p>
  <hr>
  <p class="module-text"><strong>4. Real-World Use Cases</strong><br>
    â€¢ <strong>Utility:</strong> Access to features, content, or communities (like KLY for courses)<br>
    â€¢ <strong>Governance:</strong> Voting rights in DAOs or platforms<br>
    â€¢ <strong>Incentives:</strong> Rewards for activity, referrals, or staking<br>
    â€¢ <strong>Equity:</strong> Represent project ownership, revenue-sharing, or royalties<br>
    â€¢ <strong>Identity:</strong> Proof of membership, credentials, or achievements via NFTs<br><br>
    Tokens become programmable assets that work on your behalf.
  </p>
  <hr>
  <p class="module-text"><strong>5. Building Sustainable Tokenomics</strong><br>
    Creating a token is easy. Designing a long-term system of value takes strategy.<br><br>
    Good tokenomics answers:<br>
    â€¢ Who receives tokens?<br>
    â€¢ How are they distributed over time?<br>
    â€¢ Is supply fixed or inflationary?<br>
    â€¢ How is demand created and sustained?<br>
    â€¢ What happens if demand falls?<br><br>
    We'll explore real examples (like Uniswap, Aave, and KLY) to show how token models succeedâ€”or fail.
  </p>
  <hr>
  <p class="module-text"><em>Next: Smart Contracts (Module 3)</em><br>
    Now that you know what tokens are, it's time to explore how they're poweredâ€”through smart contracts.<br><br>
    â†’ Click "Next" to continue to Module 3.
  </p>
  <button class="back-button" onclick="showPreviousModule(1)">Back</button>
  <button onclick="showNextModule(3)">Next</button>
</div>
  
<div id="module3" class="hidden">
  <h2 class="module-title">Module 3: Smart Contracts</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Smart contracts are the backbone of Web3 automation. They're not contracts in the legal sense, but self-executing code that runs on the blockchain when predefined conditions are met. In this module, you'll explore how smart contracts replace intermediaries and enable trustless, decentralized systems.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    â€¢ What smart contracts are and how they work<br>
    â€¢ Solidity programming basics<br>
    â€¢ Use cases: DeFi, DAOs, NFTs, governance<br>
    â€¢ Key functions, permissions, and upgradeability<br>
    â€¢ Security concerns: reentrancy, exploits, and audits
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is a Smart Contract?</strong><br>
    A smart contract is an immutable piece of code stored on a blockchain. It automatically executes actions when its conditions are satisfiedâ€”no human needed.<br><br>
    Think of it like a digital vending machine:<br>
    â€¢ Input a token<br>
    â€¢ Conditions are checked<br>
    â€¢ Output is delivered (product, vote, reward, NFT)<br><br>
    There's no need to trust a person or companyâ€”you trust the code.
  </p>
  <hr>
  <p class="module-text"><strong>2. How Smart Contracts Are Built</strong><br>
    Most smart contracts are written in Solidity, Ethereum's native programming language.<br><br>
    Each contract contains:<br>
    â€¢ State variables (like a balance or owner)<br>
    â€¢ Functions (to deposit, withdraw, mint, transfer, vote, etc.)<br>
    â€¢ Modifiers to restrict access (e.g., <code>onlyOwner</code>)<br>
    â€¢ Events to log actions to the blockchain<br><br>
    Every transaction costs gas (BNB on BSC), which pays to execute that contract logic.
  </p>
  <hr>
  <p class="module-text"><strong>3. Real-World Applications</strong><br>
    â€¢ <strong>NFTs:</strong> Mint, transfer, and verify ownership of unique assets<br>
    â€¢ <strong>DAOs:</strong> Proposals, voting, and execution without a CEO<br>
    â€¢ <strong>DeFi:</strong> Stake tokens, swap assets, earn yield<br>
    â€¢ <strong>Courses:</strong> Unlock modules, verify access, mint certifications (like this one)<br><br>
    Smart contracts make Web3 apps decentralized, trustless, and interactive.
  </p>
  <hr>
  <p class="module-text"><strong>4. Security & Best Practices</strong><br>
    Because smart contracts manage value, security is critical.<br><br>
    Common threats include:<br>
    â€¢ Reentrancy attacks (like the infamous DAO hack)<br>
    â€¢ Integer overflows/underflows<br>
    â€¢ Poor access controls<br>
    â€¢ Irreversible logic without upgrade paths<br><br>
    Use trusted libraries like OpenZeppelin, platforms like Thirdweb, and multisig wallets (e.g., Gnosis Safe). Always audit before deploying.
  </p>
  <hr>
  <p class="module-text"><strong>5. No-Code Tools for Creators</strong><br>
    Don't know how to code? Web3 has tools for you:<br>
    â€¢ <strong>Thirdweb:</strong> Deploy tokens, NFTs, and DAOs with a UI<br>
    â€¢ <strong>Remix IDE:</strong> Browser-based Solidity editor and simulator<br>
    â€¢ <strong>Snapshot & Tally:</strong> Build DAO voting platforms without code<br><br>
    These tools make smart contracts accessible to anyone with a vision.
  </p>
  <hr>
  <p class="module-text"><em>Next: DeFi, Credit & Capital (Module 4)</em><br>
    Now that you understand automation, let's explore how to use smart contracts for financing, lending, and yield in DeFi.<br><br>
    â†’ Click "Next" to continue to Module 4.
  </p>
  <button class="back-button" onclick="showPreviousModule(2)">Back</button>
  <button onclick="showNextModule(4)">Next</button>
</div>
  
<div id="module4" class="hidden">
  <h2 class="module-title">Module 4: DeFi, Credit & Capital</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Decentralized Finance (DeFi) replaces banks with smart contracts. It offers open access to financial tools like borrowing, lending, staking, and tradingâ€”without middlemen, paperwork, or gatekeepers. In this module, you'll learn how to unlock capital and generate yield using your assets.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    â€¢ How DeFi protocols like Aave, Uniswap, and Compound work<br>
    â€¢ Liquidity pools and automated market makers (AMMs)<br>
    â€¢ Yield farming, staking, and earning passive income<br>
    â€¢ Building credit in Web3<br>
    â€¢ DAO treasuries and capital strategies
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is DeFi?</strong><br>
    DeFi stands for Decentralized Finance. It uses smart contracts to provide financial services without relying on banks or brokers.<br><br>
    With DeFi, you can:<br>
    â€¢ Lend and borrow crypto<br>
    â€¢ Trade assets on decentralized exchanges (DEXs)<br>
    â€¢ Earn interest through staking or liquidity pools<br>
    â€¢ Access capital 24/7 with no middleman<br><br>
    No KYC. No banks. Just transparent code and collateral.
  </p>
  <hr>
  <p class="module-text"><strong>2. Understanding Liquidity Pools</strong><br>
    Liquidity pools are smart contracts that hold pairs of tokens. Users deposit assets to enable trading and earn fees.<br><br>
    Example:<br>
    â€¢ You deposit KLY and USDT into a pool<br>
    â€¢ Traders swap between these assets<br>
    â€¢ You earn a share of the trading fees<br><br>
    These pools are powered by AMMs (automated market makers), like those on PancakeSwap or Uniswap, that use math instead of order books.
  </p>
  <hr>
  <p class="module-text"><strong>3. Yield Farming & Passive Income</strong><br>
    DeFi helps you grow assets without selling them. Popular methods include:<br>
    â€¢ <strong>Staking:</strong> Lock tokens to secure a protocol and earn rewards<br>
    â€¢ <strong>Yield farming:</strong> Provide liquidity to earn tokens and incentives<br>
    â€¢ <strong>Auto-compounders:</strong> Platforms like Beefy or Autofarm that reinvest profits automatically<br><br>
    High yields often come with high risks. Always DYOR (Do Your Own Research).
  </p>
  <hr>
  <p class="module-text"><strong>4. Web3 Credit & On-Chain Reputation</strong><br>
    Traditional credit scores don't apply in Web3. Instead:<br>
    â€¢ Reputation protocols track your activity (e.g., Lens, Gitcoin Passport)<br>
    â€¢ Soulbound NFTs can show proof of trust or achievement<br>
    â€¢ Protocols offer loans based on on-chain behavior or collateral<br><br>
    This opens borderless credit where your actionsâ€”not your addressâ€”earn access.
  </p>
  <hr>
  <p class="module-text"><strong>5. DAO Treasuries & Capital Allocation</strong><br>
    DAOs often manage large treasuries. Here's how they operate:<br>
    â€¢ Multisig wallets like Gnosis Safe store funds securely<br>
    â€¢ Community members propose and vote on how funds are used<br>
    â€¢ Treasuries may hold stablecoins, tokens, LP assets, or NFTs<br><br>
    Tools like Snapshot and Tally allow decentralized budget management with transparency and alignment.
  </p>
  <hr>
  <p class="module-text"><em>Next: Ownership & Legacy (Module 5)</em><br>
    Now that you can earn and manage assets, the final step is preserving themâ€”and planning your legacy.<br><br>
    â†’ Click "Next" to continue to Module 5.
  </p>
  <button class="back-button" onclick="showPreviousModule(3)">Back</button>
  <button onclick="showNextModule(5)">Next</button>
</div>
  
<div id="module5" class="hidden">
  <h2 class="module-title">Module 5: Ownership & Legacy</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    In Web3, true wealth isn't just about earning tokensâ€”it's about protecting them, governing them, and passing them on. This module explores how to secure your digital assets, build legacy systems, and plan for long-term value transfer through decentralized tools.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    â€¢ Multisig wallets and estate planning<br>
    â€¢ Family DAOs and on-chain succession<br>
    â€¢ Decentralized identity and data sovereignty<br>
    â€¢ NFT wills and token inheritance<br>
    â€¢ Building a legacy through education and smart contracts
  </p>
  <hr>
  <p class="module-text"><strong>1. Ownership in the Digital Age</strong><br>
    In Web2, companies own your identity and data. In Web3, you reclaim control:<br><br>
    â€¢ Your wallet is your bank<br>
    â€¢ Your private key is your signature<br>
    â€¢ Your tokens and NFTs are your assets<br>
    â€¢ Your on-chain identity is your reputation<br><br>
    With great power comes responsibility. If you lose access, there's no "forgot password." That's why planning is essential.
  </p>
  <hr>
  <p class="module-text"><strong>2. Multisig Wallets & DAO Structures</strong><br>
    A multisig wallet like Gnosis Safe requires multiple approvals for transactions. This adds security and enables family or group governance.<br><br>
    Example setups:<br>
    â€¢ 3-of-5 family members to release inheritance<br>
    â€¢ Parent-child co-managed education funds<br>
    â€¢ Legacy DAOs to distribute resources based on votes<br><br>
    DAOs can preserve values and wealth across generations.
  </p>
  <hr>
  <p class="module-text"><strong>3. NFT Wills & Smart Inheritance</strong><br>
    Smart contracts can automate estate plans:<br><br>
    â€¢ Soulbound NFTs represent inheritance rights<br>
    â€¢ Time-locked contracts or activity triggers pass assets to heirs<br>
    â€¢ Encrypted instructions or credentials stored on IPFS<br><br>
    This system avoids probate, delays, and court disputes. It's programmable, transparent, and trustless.
  </p>
  <hr>
  <p class="module-text"><strong>4. Protecting Privacy & Identity</strong><br>
    Your identity is also part of your legacy. Use decentralized tools to protect it:<br><br>
    â€¢ ENS and Sign-In With Ethereum for seamless Web3 identity<br>
    â€¢ Verifiable Credentials to prove roles, relationships, or certifications<br>
    â€¢ IPFS + encryption to store private documents securely<br><br>
    Choose what your legacy revealsâ€”and to whom.
  </p>
  <hr>
  <p class="module-text"><strong>5. Legacy as a Living System</strong><br>
    Legacy isn't just about passing on assetsâ€”it's about passing on values, systems, and empowerment.<br><br>
    â€¢ Automate distributions with smart contracts<br>
    â€¢ Educate heirs about wallets, DAOs, and on-chain security<br>
    â€¢ Use NFTs, DAOs, and tokens to preserve your philosophy<br><br>
    With KLY, your impact can live on through the tools you leave behind.
  </p>
  <hr>
  <p class="module-text"><em>You've Completed the KLY Legacy Course!</em><br>
    Click below to mint your NFT Certificate of Completion and officially join the ranks of digital legacy builders.
  </p>
  <button class="back-button" onclick="showPreviousModule(4)">Back</button>
  <button onclick="showNextModule('mint')">Complete Course</button>
</div>

<div id="mintSection" class="hidden">
  <h2>Claim Your NFT Certificate</h2>
  <img src="https://ipfs.io/ipfs/bafybeihkmkaf2mgx7xkrnkhmzd2uvhr6ddgj6z3vkqcgnvlaa3z7x263r4" alt="NFT Certificate">
  <button onclick="mintNFT()">Mint NFT</button>
  <p id="mintStatus" class="status"></p>
</div>

<script>
  const KLY_TOKEN = "0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52";
  const KLY_ABI = [{
    constant: true,
    inputs: [{ name: "account", type: "address" }],
    name: "balanceOf",
    outputs: [{ name: "", type: "uint256" }],
    type: "function"
  }];

  let wallet;

  async function connectWallet() {
    try {
      if (!window.ethereum) {
          return alert("Please install MetaMask or another Web3 wallet.");
      }
      
      const web3 = new Web3(window.ethereum);
      await window.ethereum.request({ method: "eth_requestAccounts" });
      const accounts = await web3.eth.getAccounts();
      wallet = accounts[0];
      
      document.getElementById("accessStatus").innerText = "Wallet connected: " + wallet.slice(0,6) + "..." + wallet.slice(-4);
      console.log("Connected wallet:", wallet);
      
      // Listen for account changes
      window.ethereum.on('accountsChanged', (accounts) => {
          if (accounts.length === 0) {
              console.log('Wallet disconnected');
              wallet = null;
              document.getElementById("accessStatus").innerText = "Wallet disconnected";
          } else {
              wallet = accounts[0];
              document.getElementById("accessStatus").innerText = "Wallet connected: " + wallet.slice(0,6) + "..." + wallet.slice(-4);
          }
      });
      
      return true;
    } catch (error) {
      console.error("Wallet connection error:", error);
      document.getElementById("accessStatus").innerText = "Connection failed: " + error.message;
      return false;
    }
  }

  async function verifyAccess() {
    if (!wallet) {
      const connected = await connectWallet();
      if (!connected) return;
    }
    
    try {
      const web3 = new Web3(window.ethereum);
      const contract = new web3.eth.Contract(KLY_ABI, KLY_TOKEN);
      const balance = await contract.methods.balanceOf(wallet).call();
      const balanceEth = web3.utils.fromWei(balance, "ether");

      if (parseFloat(balanceEth) >= 500) {
        document.getElementById("accessPanel").classList.add("hidden");
        document.getElementById("module1").classList.remove("hidden");
      } else {
        document.getElementById("accessStatus").innerText = "Access Denied: You only hold " + balanceEth + " KLY (500 required)";
      }
    } catch (error) {
      console.error("Access verification failed:", error);
      document.getElementById("accessStatus").innerText = "Error checking balance: " + error.message;
    }
  }

  function showNextModule(moduleNumber) {
    // Hide all modules
    for (let i = 1; i <= 5; i++) {
      const mod = document.getElementById(`module${i}`);
      if (mod) mod.classList.add("hidden");
    }

    document.getElementById("mintSection").classList.add("hidden");

    // Show selected module or mint section
    if (moduleNumber === 'mint') {
      document.getElementById("module5").classList.add("hidden");
      document.getElementById("mintSection").classList.remove("hidden");
    } else {
      const nextMod = document.getElementById(`module${moduleNumber}`);
      if (nextMod) nextMod.classList.remove("hidden");
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function showPreviousModule(moduleNumber) {
    // Hide all modules
    for (let i = 1; i <= 5; i++) {
      const mod = document.getElementById(`module${i}`);
      if (mod) mod.classList.add("hidden");
    }

    const prevMod = document.getElementById(`module${moduleNumber}`);
    if (prevMod) prevMod.classList.remove("hidden");

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  async function mintNFT() {
    try {
      if (!wallet) {
        const connected = await connectWallet();
        if (!connected) return;
      }

      document.getElementById("mintStatus").innerText = "Checking mint status...";

      const sdk = new thirdweb.ThirdwebSDK("binance");
      const nftContract = await sdk.getContract("0xDA76d35742190283E340dbeE2038ecc978a56950", "nft-collection");

      // Check how many NFTs the user owns
      const balance = await nftContract.erc721.balanceOf(wallet);

      if (balance.toNumber() > 0) {
        document.getElementById("mintStatus").innerText = "You have already minted your certificate.";
        return;
      }

      // Proceed with mint
      document.getElementById("mintStatus").innerText = "Minting your NFT...";

      const tx = await nftContract.erc721.mintTo(wallet, {
        name: "KLY Legacy Graduate",
        description: "Official Certificate of Completion for the KLY Legacy Course",
        image: "ipfs://bafybeihkmkaf2mgx7xkrnkhmzd2uvhr6ddgj6z3vkqcgnvlaa3z7x263r4",
      });

      document.getElementById("mintStatus").innerHTML =
        `ðŸŽ‰ NFT minted successfully!<br><a href="https://bscscan.com/tx/${tx.receipt.transactionHash}" target="_blank">View on BscScan</a>`;
    } catch (error) {
      console.error("NFT minting failed:", error);
      document.getElementById("mintStatus").innerText =
        "Minting failed: " + (error.message || error);
    }
  }
</script>

</body>
</html>
