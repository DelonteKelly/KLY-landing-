<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sovereignty Mastery Program</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

  <!-- Web3 Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>
  <script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

  <style>
    :root{
      --bg:#0b0f14;--card:#121825;--card-2:#0f1522;--text:#e8eefc;--muted:#aeb7c9;
      --accent:#7c7cff;--accent-2:#5fe1b9;--gold:#f6c667;--danger:#ff6b6b;--ok:#22c55e;
      --border:rgba(255,255,255,.08);--shadow:0 10px 30px rgba(0,0,0,.35);--radius:14px;
      --transition:all .3s ease
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{background:linear-gradient(180deg,#0b0f14 0%,#0e1320 100%);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6;overflow-x:hidden;scroll-behavior:smooth}
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}

    /* App Bar */
    .appbar{position:sticky;top:0;z-index:100;backdrop-filter:blur(10px);background:rgba(11,15,20,.82);border-bottom:1px solid var(--border)}
    .appbar-inner{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:.75rem 0}
    .brand{display:flex;align-items:center;gap:.65rem;font-weight:800;letter-spacing:-.2px}
    .brand-badge{height:28px;width:28px;border-radius:8px;display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent-2),var(--accent));color:#0b0f14;font-weight:900}
    .topnav{display:flex;gap:.25rem;flex-wrap:wrap}
    .topnav a{padding:.5rem .75rem;border-radius:10px;border:1px solid transparent}
    .topnav a.active,.topnav a:hover{background:rgba(255,255,255,.05);border-color:var(--border)}
    .right-rail{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}
    .theme-toggle{background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--text);width:38px;height:38px;border-radius:10px;display:grid;place-items:center;cursor:pointer;transition:var(--transition)}
    .theme-toggle:hover{background:rgba(255,255,255,.12)}

    /* Wallet mini */
    .wallet-mini{display:flex;gap:.5rem;align-items:center}
    .wallet-btn{background:linear-gradient(90deg,var(--accent-2),var(--accent));border:none;color:#0b0f14;padding:.55rem .8rem;border-radius:10px;font-weight:800;cursor:pointer;transition:var(--transition);display:flex;align-items:center;gap:.45rem}
    .wallet-btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(124,124,255,.3)}
    .chip{background:rgba(15,21,35,.8);border:1px solid var(--border);border-radius:10px;padding:.45rem .6rem;display:flex;align-items:center;gap:.45rem;font-size:.9rem}
    .chip .dot{width:8px;height:8px;border-radius:50%;background:#777}.chip.ok .dot{background:var(--ok)}

    /* Hero */
    .hero{padding:3.25rem 0 2.5rem;text-align:center}
    .hero-title{font-size:3rem;font-weight:800;margin-bottom:.65rem;background:linear-gradient(135deg,var(--accent-2),var(--accent),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero-subtitle{font-size:1.15rem;color:var(--muted);max-width:840px;margin:0 auto 1.5rem}
    .hero-cta{display:flex;gap:.75rem;justify-content:center;flex-wrap:wrap}
    .cta-button{padding:.9rem 1.35rem;border-radius:999px;font-weight:700;transition:var(--transition);display:inline-flex;align-items:center;gap:.5rem}
    .cta-primary{background:linear-gradient(90deg,var(--accent),#8a7cff);color:white}
    .cta-primary:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(124,124,255,.3)}
    .cta-secondary{background:transparent;border:2px solid var(--accent);color:var(--accent)}
    .cta-secondary:hover{background:rgba(124,124,255,.1)}

    /* Sections */
    section{padding:1rem 0 0}
    .section-head{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem;margin:1rem 0 .5rem}
    .section-title{font-size:1.75rem;font-weight:800}
    .section-sub{color:var(--muted)}

    /* Overview card */
    .overview{background:linear-gradient(180deg,var(--card),var(--card-2));border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem;box-shadow:var(--shadow)}
    .overview h3{color:var(--gold);margin:.25rem 0 .5rem}
    .overview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:.5rem}
    .overview li{margin:.35rem 0;color:var(--muted)}

    /* Progress */
    .progress{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1.2rem;margin:1.25rem 0;box-shadow:var(--shadow)}
    .progress-bar{height:12px;background:rgba(255,255,255,.06);border-radius:999px;overflow:hidden}
    .progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#8a7cff,var(--gold));transition:width .7s ease;position:relative}
    .progress-stats{display:flex;gap:1rem;color:var(--muted);flex-wrap:wrap;margin-top:.6rem}
    .progress-tools{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.75rem}
    .small-btn{background:transparent;border:1px solid var(--border);color:#cfe2ff;border-radius:8px;padding:.4rem .65rem;cursor:pointer;transition:var(--transition)}
    .small-btn:hover{background:rgba(255,255,255,.1)}

    /* Grids & cards */
    .modules-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:18px;margin:1rem 0}
    .module-card{background:linear-gradient(180deg,var(--card),var(--card-2));border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem;display:flex;flex-direction:column;gap:.8rem;box-shadow:var(--shadow);position:relative;overflow:hidden;min-height:240px}
    .module-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--accent-2));opacity:0;transition:var(--transition)}
    .module-card:hover{transform:translateY(-4px);box-shadow:0 15px 35px rgba(0,0,0,.4)}
    .module-card:hover::before{opacity:1}
    .module-header{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;column-gap:.75rem}
    .module-badge{height:38px;width:38px;border-radius:10px;background:rgba(124,124,255,.16);border:1px solid rgba(124,124,255,.3);display:grid;place-items:center;font-weight:800;color:#bfbfff}
    .module-title{margin:0;font-size:1.2rem;font-weight:800}
    .module-theme{grid-column:2;color:var(--muted);font-size:.95rem;margin-top:-2px}
    .module-content{color:var(--muted)}
    .module-footer{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:.75rem}
    .status-indicator{width:10px;height:10px;border-radius:50%;background:#777}
    .status-indicator.in-progress{background:#f59e0b;box-shadow:0 0 10px rgba(245,158,11,.5)}
    .status-indicator.completed{background:var(--ok);box-shadow:0 0 10px rgba(34,197,94,.5)}
    .module-button{background:linear-gradient(90deg,var(--accent),#8a7cff);border:none;color:white;padding:.6rem .9rem;border-radius:10px;cursor:pointer;font-weight:700;display:inline-flex;align-items:center;gap:.45rem}
    .module-button:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(124,124,255,.3)}

    /* Module Detail modal */
    .modal{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:rgba(0,0,0,.5);z-index:999}
    .modal.open{display:flex}
    .panel{width:min(950px,96vw);max-height:86vh;overflow:auto;background:linear-gradient(180deg,#0f1522,#0b101b);border:1px solid var(--border);border-radius:16px 16px 0 0;padding:1.25rem 1.25rem 1.35rem}
    .detail-header{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;margin-bottom:.8rem;padding-bottom:.6rem;border-bottom:1px solid var(--border)}
    .detail-title{margin:0;font-size:1.65rem;font-weight:800}
    .detail-theme{color:var(--muted)}
    .detail-close{background:transparent;border:1px solid var(--border);color:#98a4c8;height:40px;width:40px;border-radius:8px;cursor:pointer}
    .detail-content h3{margin:1rem 0 .5rem;color:var(--accent-2)}
    .practice-box{background:rgba(124,124,255,.08);border:1px dashed rgba(124,124,255,.35);border-radius:12px;padding:1rem;margin:1rem 0}

    /* Tools */
    .tools-card{background:rgba(124,124,255,.1);border-radius:var(--radius);padding:1.25rem;text-align:center}
    .timer-display{font-size:2.6rem;font-weight:800;margin:.6rem 0;color:var(--accent)}

    /* Sovereign Self */
    .code-number{position:absolute;top:-12px;left:-12px;width:36px;height:36px;border-radius:50%;
      background:linear-gradient(135deg,var(--accent-2),var(--accent));color:#0b0f14;display:flex;align-items:center;justify-content:center;font-weight:800;box-shadow:var(--shadow)}
    .sv-nav{display:flex;gap:.5rem;flex-wrap:wrap}
    .sv-tab{padding:.5rem .75rem;border-radius:10px;background:rgba(255,255,255,.05);border:1px solid var(--border);cursor:pointer}
    .sv-tab.active,.sv-tab:hover{background:linear-gradient(90deg,var(--accent),#8a7cff);color:#fff;border-color:transparent}

    /* Community & footer */
    .community{background:rgba(246,198,103,.05);border:1px solid rgba(246,198,103,.2);border-radius:var(--radius);padding:1.4rem;text-align:center}
    .community-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:1rem}
    .community-card{background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:var(--radius);padding:1rem}
    .footer{margin-top:2rem;padding:1.5rem 0;border-top:1px solid var(--border);text-align:center;color:var(--muted);font-size:.9rem}

    /* Toast */
    .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#0f1422;color:#eaf2ff;border:1px solid var(--border);padding:12px 18px;border-radius:10px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:1000;display:flex;align-items:center;gap:8px}
    .toast.show{opacity:1}

    /* Responsive */
    @media (max-width:768px){
      .hero-title{font-size:2.25rem}
      .topnav{display:none} /* keep header clean on small screens */
    }
  </style>
</head>
<body>
  <!-- Toast -->
  <div class="toast" id="toast"><i class="fas fa-check-circle"></i><span id="toastMessage"></span></div>

  <!-- APP BAR -->
  <header class="appbar" aria-label="Primary">
    <div class="container appbar-inner">
      <div class="brand">
        <div class="brand-badge">SM</div>
        <span>Sovereignty Mastery</span>
      </div>
      <nav class="topnav" id="topnav">
        <a href="#home" class="active">Home</a>
        <a href="#overview">Overview</a>
        <a href="#progress">Progress</a>
        <a href="#modules">Modules</a>
        <a href="#tools">Tools</a>
        <a href="#sovereign">Sovereign Self</a>
        <a href="#community">Community</a>
      </nav>
      <div class="right-rail">
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
        <div class="wallet-mini">
          <button id="connectBtn" class="wallet-btn"><i class="fa-solid fa-wallet"></i><span>Connect</span></button>
          <div id="addrChip" class="chip" style="display:none">
            <span class="dot"></span><i class="fa-regular fa-id-card"></i>
            <span id="addrShort" class="mono">0xâ€¦</span>
            <button id="copyAddr" class="small-btn" title="Copy"><i class="fa-regular fa-copy"></i></button>
          </div>
          <div id="gateChip" class="chip" style="display:none"><span class="dot"></span><i class="fa-solid fa-key"></i><span id="gateText">Checkingâ€¦</span></div>
        </div>
      </div>
    </div>
  </header>

  <main id="home" class="container" tabindex="-1">
    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-title">
      <h1 id="hero-title" class="hero-title">Sovereignty Mastery Program</h1>
      <p class="hero-subtitle">A transformative journey to reclaim your personal power and live with authentic authority.</p>
      <div class="hero-cta">
        <a href="#modules" class="cta-button cta-primary"><i class="fas fa-play-circle"></i> Start Your Journey</a>
        <a href="#overview" class="cta-button cta-secondary"><i class="fas fa-info-circle"></i> Learn More</a>
        <a href="#" id="printWorkbook" class="cta-button cta-secondary"><i class="fas fa-print"></i> Print Workbook</a>
      </div>
    </section>

    <!-- OVERVIEW -->
    <section id="overview" aria-labelledby="overview-title">
      <div class="section-head">
        <h2 class="section-title" id="overview-title">ðŸŒŸ The Sovereign Self â€” Program Overview</h2>
        <div class="section-sub">Reclaim your throne. Live by your own rules.</div>
      </div>
      <article class="overview">
        <h3>ðŸ”¥ Reclaim Your Throne</h3>
        <p class="serif-italic">Stop living by rules you never agreed to. Step into your sovereignty and claim your rightful throne as the author of your life.</p>
        <div class="overview-grid">
          <div>
            <h4>Who This Is For</h4>
            <ul>
              <li>Seekers, healers & entrepreneurs ready for unshakable authority.</li>
              <li>Those tired of playing small or living by external expectations.</li>
              <li>Leaders who want systems of freedom, not control.</li>
              <li>Anyone who knows they're meant for more.</li>
            </ul>
          </div>
          <div>
            <h4>Who This Is Not For</h4>
            <ul>
              <li>Comfort over growth.</li>
              <li>Unwilling to self-reflect or face shadow.</li>
              <li>Quick fixes without commitment.</li>
              <li>Victimhood as identity.</li>
            </ul>
          </div>
        </div>
        <h4 style="margin-top:1rem">The Transformation</h4>
        <p><strong>Before:</strong> Approvalâ€‘seeking, drained by systems of control, unsure of your inner voice.</p>
        <p><strong>After:</strong> Rooted in your inner throneâ€”clear boundaries, steady authority, sovereign stewardship, soulâ€‘aligned life.</p>
      </article>
    </section>

    <!-- PROGRESS -->
    <section id="progress" aria-labelledby="progress-title">
      <div class="section-head">
        <h2 class="section-title" id="progress-title">Your Progress</h2>
      </div>
      <div class="progress" aria-live="polite">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem">
          <strong id="progressPct">0% Complete</strong>
          <span id="progressCount" class="section-sub">0 of 14 Modules Completed</span>
        </div>
        <div class="progress-bar" aria-hidden="true"><div class="progress-fill" id="progressFill"></div></div>
        <div class="progress-stats">
          <span>Estimated 24 hours to complete</span>
          <span id="timeSpent">Time spent: 0h 0m</span>
        </div>
        <div class="progress-tools" style="margin-top:.8rem">
          <button class="small-btn" id="exportProgress"><i class="fas fa-file-export"></i> Export Progress</button>
          <button class="small-btn" id="importProgress"><i class="fas fa-file-import"></i> Import Progress</button>
          <input type="file" id="importFile" accept="application/json" style="display:none" />
        </div>
      </div>

      <div class="progress" id="eligibilityBox">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem">
          <strong>Certificate Eligibility</strong>
          <strong id="eligibilityStatus" class="section-sub">Checkingâ€¦</strong>
        </div>
        <p id="eligibilityDesc" class="section-sub" style="margin:.4rem 0 1rem"></p>
        <button id="claimCert" class="cta-button cta-primary" disabled><i class="fas fa-certificate"></i> Claim Certificate</button>
      </div>
    </section>

    <!-- MODULES -->
    <section id="modules" aria-labelledby="modules-title">
      <div class="section-head">
        <h2 class="section-title" id="modules-title">Core Modules (1â€“7)</h2>
        <div class="section-sub">Build from foundations to full integration.</div>
      </div>

      <div class="modules-grid" role="list" id="modulesGrid">
        <!-- Card 1 -->
        <div class="module-card" role="listitem" data-module="1">
          <div class="module-header">
            <div class="module-badge">1</div>
            <h3 class="module-title">Foundation of Sovereignty</h3>
            <div class="module-theme">Understanding Personal Power</div>
          </div>
          <div class="module-content">
            <p>Discover the core principles of sovereignty and how to reclaim your innate power.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 2 -->
        <div class="module-card" role="listitem" data-module="2">
          <div class="module-header">
            <div class="module-badge">2</div>
            <h3 class="module-title">Boundaries & Energy Protection</h3>
            <div class="module-theme">Creating Safe Containers</div>
          </div>
          <div class="module-content">
            <p>Establish and maintain healthy boundaries that honor your energy and values.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 3 -->
        <div class="module-card" role="listitem" data-module="3">
          <div class="module-header">
            <div class="module-badge">3</div>
            <h3 class="module-title">Authentic Decision Making</h3>
            <div class="module-theme">Listening to Inner Wisdom</div>
          </div>
          <div class="module-content">
            <p>Decide in alignment with your true self, not external expectations.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 4 -->
        <div class="module-card" role="listitem" data-module="4">
          <div class="module-header">
            <div class="module-badge">4</div>
            <h3 class="module-title">Sovereign Communication</h3>
            <div class="module-theme">Expressing Truth with Power</div>
          </div>
          <div class="module-content">
            <p>Communicate truth with clarity, compassion, and conviction.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 5 -->
        <div class="module-card" role="listitem" data-module="5">
          <div class="module-header">
            <div class="module-badge">5</div>
            <h3 class="module-title">Financial Sovereignty</h3>
            <div class="module-theme">Wealth as Energy Exchange</div>
          </div>
          <div class="module-content">
            <p>Align your financial life with your values and create empowered money practices.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 6 -->
        <div class="module-card" role="listitem" data-module="6">
          <div class="module-header">
            <div class="module-badge">6</div>
            <h3 class="module-title">Sovereign Relationships</h3>
            <div class="module-theme">Connecting Without Losing Self</div>
          </div>
          <div class="module-content">
            <p>Build relationships that honor connection and autonomy, without codependency.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Card 7 -->
        <div class="module-card" role="listitem" data-module="7">
          <div class="module-header">
            <div class="module-badge">7</div>
            <h3 class="module-title">Living as Sovereign Being</h3>
            <div class="module-theme">Integration & Mastery</div>
          </div>
          <div class="module-content">
            <p>Integrate all aspects into a cohesive lifestyle of empowered living.</p>
          </div>
          <div class="module-footer">
            <div class="module-status"><span class="status-indicator"></span><span class="status-text">Not Started</span></div>
            <button class="module-button">Begin Module <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>
      </div>
    </section>

    <!-- MODULE DETAIL (Modal Drawer) -->
    <div class="modal" id="moduleModal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="panel" role="document">
        <div class="detail-header">
          <div>
            <h3 class="detail-title" id="detailTitle">Module</h3>
            <div class="detail-theme" id="detailTheme"></div>
          </div>
          <button class="detail-close" id="closeDetail" title="Close"><i class="fas fa-times"></i></button>
        </div>
        <div class="detail-content" id="detailContent"></div>
      </div>
    </div>

    <!-- TOOLS -->
    <section id="tools" aria-labelledby="tools-title">
      <div class="section-head">
        <h2 class="section-title" id="tools-title">Tools</h2>
        <div class="section-sub">Daily practices to keep you aligned.</div>
      </div>
      <div class="tools-card">
        <h3><i class="fas fa-clock"></i> Meditation Timer</h3>
        <p>Set a timer for your daily sovereignty practice.</p>
        <div class="timer-display" id="timerDisplay">10:00</div>
        <div style="display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap">
          <button class="cta-button cta-secondary" data-time="5">5 min</button>
          <button class="cta-button cta-secondary" data-time="10">10 min</button>
          <button class="cta-button cta-secondary" data-time="20">20 min</button>
          <button class="cta-button cta-primary" id="startTimer">Start</button>
          <button class="cta-button cta-secondary" id="pauseTimer" disabled>Pause</button>
          <button class="cta-button cta-secondary" id="resetTimer">Reset</button>
        </div>
      </div>
    </section>

    <!-- SOVEREIGN SELF -->
    <section id="sovereign" aria-labelledby="sovereign-title">
      <div class="section-head">
        <h2 class="section-title" id="sovereign-title">The Sovereign Self (7)</h2>
        <div class="section-sub">A deeper arc to embody your authority.</div>
      </div>

      <div class="sv-nav" aria-label="Sovereign Self Navigation">
        <button class="sv-tab active" data-sv="sv1">Module 1</button>
        <button class="sv-tab" data-sv="sv2">Module 2</button>
        <button class="sv-tab" data-sv="sv3">Module 3</button>
        <button class="sv-tab" data-sv="sv4">Module 4</button>
        <button class="sv-tab" data-sv="sv5">Module 5</button>
        <button class="sv-tab" data-sv="sv6">Module 6</button>
        <button class="sv-tab" data-sv="sv7">Module 7</button>
      </div>

      <div class="modules-grid" style="margin-top:.75rem">
  <!-- SV1 -->
  <div id="sv1" class="module-card" style="display:block;">
    <div class="code-number">1</div>
    <div class="module-title">The Call to Sovereignty</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>True power begins with recognizing you're more than compliant patternsâ€”you are a sovereign soul called to reclaim your throne. Sovereignty is your birthright to complete authority over your own beingâ€”your thoughts, emotions, choices, and energy.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Identify where you've surrendered personal authority to external systems, relationships, or internalized beliefs</li>
        <li>Hear and trust the whisper of your sovereign self beneath the noise of conditioning</li>
        <li>Discern ego's fear-based reactions from the soul's intuitive guidance</li>
        <li>Commit to answering the call with concrete, courageous actions</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>Recognizing the Whisper of Your Soul</strong> - Learn to distinguish between the authentic voice of your essence and the borrowed voices of family, culture, and society. Your soul's whisper often comes as gentle intuition, bodily knowing, or synchronicities.</li>
        <li><strong>The Illusion of the Matrix</strong> - Examine how systems of control (educational, corporate, religious) condition us to outsource our authority. These systems profit from our disconnection from self-trust.</li>
        <li><strong>The Archetype of The Sovereign</strong> - Explore the psychological and mythological patterns of sovereign beings across cultures. The sovereign doesn't seek permission but operates from inherent rightness.</li>
        <li><strong>The Sovereignty Audit</strong> - A comprehensive assessment of where you've abdicated power in seven key life domains: relationships, finances, time, health, creativity, spirituality, and community.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Worksheet â€” Sovereignty Audit</h4>
        <p><strong>Journaling Prompts:</strong></p>
        <ul>
          <li>Where in my life do I consistently defer to others' opinions rather than trusting my own knowing?</li>
          <li>What decisions have I made recently from fear of judgment rather than alignment with my truth?</li>
          <li>Which relationships or situations require me to shrink or hide parts of myself?</li>
          <li>What one decision this week would most restore my sense of personal power?</li>
        </ul>
        <p><strong>Action Step:</strong> Identify one area where you've given away power and take one concrete action to reclaim it within 48 hours.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete1" data-track="sovereign-1"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv2">Next: False Thrones â†’</a>
      </div>
    </div>
  </div>

  <!-- SV2 -->
  <div id="sv2" class="module-card" style="display:none;">
    <div class="code-number">2</div>
    <div class="module-title">Dismantling the False Thrones</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>To stand in sovereignty, first see the illusions and tyranniesâ€”external and internalâ€”that have claimed your throne. Every false throne represents a place where you've surrendered your authority to something outside yourself.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Expose societal, cultural, and familial systems of disempowerment that masquerade as protection or tradition</li>
        <li>Name and confront the "false kings" withinâ€”the internalized voices of criticism, perfectionism, and unworthiness</li>
        <li>Recognize and dissolve hidden contracts of loyalty, obligation, and silence that keep you bound to others' expectations</li>
        <li>Develop practices to regularly identify and depose new false thrones as they emerge</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>Cultural Myths of Powerlessness</strong> - Deconstruct the stories we've inherited about who should have power (gender, age, credentials, wealth) and who shouldn't. Examine how these myths serve existing power structures.</li>
        <li><strong>Family Loyalties & Hidden Contracts</strong> - Uncover the unconscious agreements we make to belong to our family systems, often at the cost of our authentic expression. These might include "don't shine too bright" or "don't disrupt the peace."</li>
        <li><strong>Corporate/Religious/Social Thrones</strong> - Analyze how institutions become false thrones when they demand compliance over conscience, obedience over integrity, and conformity over authenticity.</li>
        <li><strong>The Inner Critic as False King</strong> - Understand how the critical inner voice often parrots external authorities and learn techniques to depose this internal tyrant through compassionate witnessing and re-parenting.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Practice â€” Breaking the Spell</h4>
        <p><strong>Identification Exercise:</strong></p>
        <ol>
          <li>List 3 cultural/familial myths that have limited your expression (e.g., "Children should be seen not heard," "Money is scarce," "Don't get above your raising")</li>
          <li>For each myth, write how it has specifically limited your sovereignty</li>
          <li>Create a declaration of liberation for each myth: "I release the story that [myth]. I now choose to believe [new empowering belief]."</li>
        </ol>
        <p><strong>Ritual Release:</strong> Safely burn the paper with the old myths as a symbolic release, or speak your declarations aloud to a trusted witness.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete2" data-track="sovereign-2"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv3">Next: The Inner Throne â†’</a>
      </div>
    </div>
  </div>

  <!-- SV3 -->
  <div id="sv3" class="module-card" style="display:none;">
    <div class="code-number">3</div>
    <div class="module-title">The Inner Throne</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>Sovereignty is an inner seat of power that no one can grant or revokeâ€”it must be claimed through conscious practice and embodiment. Your throne is not a physical place but a state of beingâ€”centered, resourced, and self-referencing.</p>
      
      <h3>Learning Objectives</hh3>
      <ul>
        <li>Anchor into soul-aligned values and principles that become the foundation of your decision-making</li>
        <li>Establish embodied presence as your throne through somatic practices that ground you in your authority</li>
        <li>Create self-anointing rituals that regularly reaffirm your sovereignty, especially during transitions or challenges</li>
        <li>Develop the capacity to return to your throne quickly when knocked off center by life's inevitable disruptions</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>The Anatomy of Inner Authority</strong> - Map the physical, emotional, mental, and energetic components of sovereignty. Learn to recognize the felt sense of being in your power versus out of it.</li>
        <li><strong>Claiming Your Core Values</strong> - Identify 3-5 non-negotiable values that form the constitution of your being. Learn to make decisions from this value center rather than external pressures.</li>
        <li><strong>Presence, Posture & Power</strong> - Explore how physical presence and posture affect your sense of authority. Practice power poses and embodied awareness exercises to cultivate regal bearing.</li>
        <li><strong>Rituals of Self-Anointing</strong> - Create daily, weekly, and monthly practices that reaffirm your sovereignty. These might include meditation, journaling, movement, or nature connection tailored to your unique soul signature.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Practice â€” Sovereign Alignment Scan</h4>
        <p><strong>Body-Based Awareness:</strong></p>
        <ol>
          <li>Sit tall with your spine erect, as if wearing a crown</li>
          <li>Breathe deeply into your belly, then your heart, then your crown</li>
          <li>Ask: "Where in my body do I feel powerful? Where do I feel diminished?"</li>
          <li>Notice where you collapse when thinking of challengesâ€”rounded shoulders, sunken chest, averted gaze</li>
          <li>With each exhale, consciously expand these areas, reclaiming your full presence</li>
        </ol>
        <p><strong>Throne Affirmation:</strong> "I am seated in my rightful throne. My authority comes from within. I govern my being with wisdom and compassion."</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete3" data-track="sovereign-3"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv4">Next: Boundaries & Consent â†’</a>
      </div>
    </div>
  </div>

  <!-- SV4 -->
  <div id="sv4" class="module-card" style="display:none;">
    <div class="code-number">4</div>
    <div class="module-title">Boundaries, Consent & Language of Power</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>Sovereign boundaries are not walls of defenseâ€”they are clear declarations of self-respect and sacred containers for your energy. Consent becomes the sacred currency of power, and language becomes the tool of precise creation rather than careless reaction.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Redefine boundaries as loving expressions of self-worth rather than rejection of others</li>
        <li>Practice consent as an ongoing conversation with life, not a one-time permission slip</li>
        <li>Master the C3 Framework: Communication that is Clear, Clean, and Compassionate</li>
        <li>Develop the capacity to say no without guilt and yes without resentment</li>
        <li>Recognize and transform linguistic patterns that leak power and diminish presence</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>The Alchemy of Boundaries</strong> - Transform boundaries from rigid walls to semi-permeable membranes that allow in nourishment while filtering out toxins. Learn to set boundaries that are firm in principle but flexible in expression.</li>
        <li><strong>Consent as Sacred Currency</strong> - Practice micro-consent throughout your dayâ€”not just in relationships but with food, media, work, and energy exchanges. Consent becomes a continuous dialogue with life.</li>
        <li><strong>The C3 Framework</strong> - Master communication that is Clear (specific and direct), Clean (free from manipulation or hidden agendas), and Compassionate (considerate of impact while honoring truth).</li>
        <li><strong>Saying No Without Guilt, Yes Without Fear</strong> - Heal the wounds that make no feel dangerous and yes feel obligatory. Practice exercises to reclaim both as equal expressions of choice.</li>
        <li><strong>Linguistic Sovereignty</strong> - Identify and transform language patterns that diminish power: apologies for existing, qualifiers, disclaimers, and minimizing language. Replace with declarative, embodied speech.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Practice â€” Boundary Invocation</h4>
        <p><strong>Daily Declaration:</strong> Upon waking, stand tall and proclaim aloud: "My yes is sacred. My no is holy. My consent is the throne from which I rule. Today, I honor my boundaries as acts of self-love."</p>
        
        <p><strong>Consent Practice:</strong> For one day, practice pausing before agreeing to anythingâ€”even small requests. Place a hand on your heart and belly, check for a full-body yes, then respond.</p>
        
        <p><strong>Language Upgrade:</strong> Identify one disempowering speech pattern (e.g., "I'm sorry but...", "I just think...", "This might be stupid but...") and commit to eliminating it for one week.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete4" data-track="sovereign-4"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv5">Next: Resources & Livelihood â†’</a>
      </div>
    </div>
  </div>

  <!-- SV5 -->
  <div id="sv5" class="module-card" style="display:none;">
    <div class="code-number">5</div>
    <div class="module-title">Alchemy of Resources & Right Livelihood</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>Sovereignty includes conscious stewardship of all resourcesâ€”time, energy, money, attention, and relationships. Wealth becomes redefined as the capacity to direct life energy toward soul-aligned purposes rather than mere accumulation.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Transform scarcity consciousness into mindful stewardship and conscious reciprocity</li>
        <li>Align livelihood with soul-purpose, creating work that expresses rather than exhausts you</li>
        <li>Redirect resources with intention, ensuring your energy flows toward what truly matters</li>
        <li>Develop systems to track and optimize your four key resource ledgers: time, energy, money, and attention</li>
        <li>Heal ancestral and cultural money wounds that create leakages in your resource field</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>The Four Ledgers of Resource Sovereignty</strong> - Master the interconnected management of time (your most finite resource), energy (your qualitative capacity), money (stored life energy), and attention (your creative force).</li>
        <li><strong>Wealth as Energy, Not Just Currency</strong> - Reframe wealth as your capacity to direct energy toward meaningful creation. Explore the energetic patterns that attract or repel abundance.</li>
        <li><strong>Right Livelihood & Sacred Work</strong> - Align your work with your soul's purpose. Assess current work against criteria of meaning, impact, compensation, and energy exchange.</li>
        <li><strong>The Attention Economy & Energy Management</strong> - Reclaim your attention from predatory systems designed to harvest it. Practice attention conservation and intentional focus.</li>
        <li><strong>Ancestral Money Healing</strong> - Identify and transform inherited financial patterns, fears, and limitations through ritual, dialogue, and conscious choice.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Worksheet â€” Resource Audit</h4>
        <p><strong>Time Ledger:</strong> Track your time for 3 days. Categorize activities as: sovereign (aligned, energizing), delegated (necessary but not yours to do), or leaked (wasted, misdirected).</p>
        
        <p><strong>Energy Audit:</strong> List your top 5 energy drains and top 5 energy generators. Commit to reducing one drain and amplifying one generator this week.</p>
        
        <p><strong>Money Mapping:</strong> Track all expenses for one month. Categorize them as: investments (in your growth), essentials (basic needs), comforts (enhance quality of life), or leaks (unconscious spending).</p>
        
        <p><strong>Attention Inventory:</strong> Notice where your attention goes unconsciously (social media, worry, distraction). Reclaim 30 minutes of attention daily for sovereign priorities.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete5" data-track="sovereign-5"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv6">Next: Selfâ€‘Governance â†’</a>
      </div>
    </div>
  </div>

  <!-- SV6 -->
  <div id="sv6" class="module-card" style="display:none;">
    <div class="code-number">6</div>
    <div class="module-title">Systems of Self-Governance</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>True freedom emerges from well-crafted agreements and systems that serve the soul. Sovereignty requires creating structures that support rather than constrain your highest expressionâ€”designing your life like a sacred kingdom with intentional laws, rhythms, and rituals.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Design daily rhythms, rituals, and agreements that support rather than deplete sovereignty</li>
        <li>Create a personal constitution that serves as your foundational governing document</li>
        <li>Reduce decision fatigue through intentional design and automation of repetitive choices</li>
        <li>Establish review systems that regularly assess alignment and course-correct as needed</li>
        <li>Develop resilience practices for maintaining sovereignty during stress, transition, or opposition</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>Design Beats Discipline</strong> - Create environments and systems that make sovereign choices automatic rather than requiring constant willpower. Design your physical, digital, and relational spaces for success.</li>
        <li><strong>Minimum Viable Rituals</strong> - Identify the simplest daily practices that maintain your connection to sovereignty. These become non-negotiable anchors during turbulent times.</li>
        <li><strong>Crafting Your Sovereign Constitution</strong> - Draft a living document outlining your core laws, values, rights, and responsibilities. This becomes your touchstone for decision-making.</li>
        <li><strong>Review & Reset Rhythms</strong> - Establish regular intervals (daily, weekly, seasonal, annual) to assess your governance systems and make adjustments as your sovereignty evolves.</li>
        <li><strong>Sovereignty Under Siege</strong> - Develop practices to maintain your center during challenges, criticism, or attempts to undermine your authority. Learn the art of graceful fortification.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Exercise â€” Draft Your Constitution</h4>
        <p><strong>Core Laws (5):</strong> Fundamental principles that govern your life (e.g., "I choose only what honors my essence," "My word is binding," "I respond rather than react").</p>
        
        <p><strong>Practices (3):</strong> Daily non-negotiables that maintain your sovereignty (e.g., morning alignment, boundary checks, evening reflection).</p>
        
        <p><strong>Red Lines (2):</strong> Absolute boundaries that cannot be crossed without consequence (e.g., "I will not tolerate disrespect," "I protect my creative time fiercely").</p>
        
        <p><strong>Implementation:</strong> Read your constitution aloud each morning for 21 days. Keep it visible. Share it with trusted allies who can help hold you accountable.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete6" data-track="sovereign-6"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv7">Next: Sovereign in Service â†’</a>
      </div>
    </div>
  </div>

  <!-- SV7 -->
  <div id="sv7" class="module-card" style="display:none;">
    <div class="code-number">7</div>
    <div class="module-title">The Sovereign in Service</div>
    <div class="module-content">
      <h3>Core Concept</h3>
      <p>Sovereignty matures into stewardship and serviceâ€”your freedom empowers the collective. The sovereign self recognizes that true power is not hoarded but circulated, and that your unique gifts are meant to be contributed to the healing and evolution of the world.</p>
      
      <h3>Learning Objectives</h3>
      <ul>
        <li>Move from isolation into conscious contribution without falling into martyrdom or codependency</li>
        <li>Offer your gifts without depletion by establishing sustainable exchange boundaries</li>
        <li>Lead in reciprocity and responsibility, modeling sovereignty for others without imposing it</li>
        <li>Discern between true service that energizes and "helping" that depletes and enables dependency</li>
        <li>Design your service offerings to align with your unique soul signature and capacity</li>
      </ul>
      
      <h3>Key Lessons</h3>
      <ol>
        <li><strong>From Isolation to Belonging</strong> - Transition from protective separation to conscious connection. Sovereignty includes choosing healthy community and collaboration.</li>
        <li><strong>The Sovereign as Steward of the Commons</strong> - Extend your care beyond personal boundaries to include the ecosystems, communities, and collective fields you inhabit.</li>
        <li><strong>Gifts, Roles & Service Design</strong> - Identify your unique soul gifts and design ways to offer them that honor both your boundaries and the needs of the world.</li>
        <li><strong>Legacy in Motion</strong> - Shift from legacy as something left behind to legacy as something lived daily through your choices, actions, and relationships.</li>
        <li><strong>The Circle of Sovereignty</strong> - Understand how your personal sovereignty contributes to collective liberation, and how collective healing supports individual sovereignty.</li>
      </ol>
      
      <div class="practice-box">
        <h4>Exercise â€” Sovereign Service Vision</h4>
        <p><strong>Gift Identification:</strong> What unique abilities, perspectives, or capacities do you possess that the world needs? (Not what you think you should offer, but what naturally flows through you.)</p>
        
        <p><strong>Recipient Clarity:</strong> Who specifically is your service for? Avoid "everyone"â€”get specific about who most resonates with your offerings.</p>
        
        <p><strong>Exchange Integrity:</strong> How can you offer your gifts in a way that sustains rather than depletes you? What constitutes fair energetic exchange?</p>
        
        <p><strong>First Step:</strong> Identify one concrete action within the next 72 hours to move your service vision forward, no matter how small.</p>
      </div>
      
      <div class="module-footer" style="gap:.6rem;flex-wrap:wrap">
        <label class="section-sub" style="display:flex;align-items:center;gap:.4rem">
          <input type="checkbox" id="svComplete7" data-track="sovereign-7"> Mark as completed
        </label>
        <a class="module-button" href="#sovereign" data-next="sv1">Return to Module 1 â†º</a>
      </div>
    </div>
  </div>
</div>

      <!-- Closing Ritual -->
      <article class="overview" style="margin-top:.75rem">
        <h3>ðŸ”® The Sovereign's Coronation</h3>
        <ol style="margin-left:1.25rem">
          <li>Dress in a way that symbolizes sovereignty.</li>
          <li>Light a candle and speak your personal constitution aloud.</li>
          <li>Hand on heart & crown: <em>"I reign from within. My sovereignty is sealed."</em></li>
          <li>Celebrate with a symbolic act (dance, feast, create).</li>
        </ol>
      </article>
    </section>

    <!-- COMMUNITY -->
    <section id="community" aria-labelledby="community-title" style="margin-top:1rem">
      <div class="section-head">
        <h2 class="section-title" id="community-title"><i class="fas fa-users"></i> Join Our Sovereign Community</h2>
        <div class="section-sub">Support, sharing, and collective growth.</div>
      </div>
      <div class="community">
        <div class="community-grid">
          <div class="community-card"><h4><i class="fas fa-comments"></i> Discussion Forum</h4><p>Share experiences and get answers to your questions.</p></div>
          <div class="community-card"><h4><i class="fas fa-calendar"></i> Live Events</h4><p>Weekly Q&A sessions and guided practices.</p></div>
          <div class="community-card"><h4><i class="fas fa-handshake"></i> Accountability Partners</h4><p>Connect for mutual support.</p></div>
        </div>
        <button class="cta-button cta-primary" style="margin-top:1rem;">Join Community <i class="fas fa-arrow-right"></i></button>
      </div>
    </section>

    <footer class="footer"><p>Sovereignty Mastery Program Â© 2025 â€¢ Designed for those ready to reclaim their power</p></footer>
  </main>

<script>
  /* ---------- Helpers ---------- */
  const showToast=(m)=>{const t=document.getElementById('toast');document.getElementById('toastMessage').textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2600)}
  const short=(a)=>a?a.slice(0,6)+'â€¦'+a.slice(-4):'0xâ€¦'

  /* ---------- THEME ---------- */
  document.getElementById('themeToggle').addEventListener('click',()=>{
    const body=document.body,icon=document.querySelector('#themeToggle i');
    if(body.dataset.theme==='light'){body.dataset.theme='';icon.className='fas fa-moon';showToast('Dark mode âœ”ï¸')}
    else{body.dataset.theme='light';icon.className='fas fa-sun';showToast('Light mode âœ”ï¸')}
  });

  /* ---------- Sticky nav active link ---------- */
  const sections=['home','overview','progress','modules','tools','sovereign','community']
    .map(id=>document.getElementById(id))
    .filter(Boolean);
  const links=[...document.querySelectorAll('.topnav a')];
  const io=new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        links.forEach(l=>l.classList.toggle('active', l.getAttribute('href')==='#'+e.target.id))
      }
    })
  },{rootMargin:'-40% 0px -50% 0px',threshold:0});
  sections.forEach(s=>io.observe(s));

  /* ---------- Print Workbook shortcut ---------- */
  document.getElementById('printWorkbook').addEventListener('click',(e)=>{
    e.preventDefault();
    window.print();
  });

  /* ---------- Module detail content ---------- */
  const MODULE_AUDIO={'1':'','2':'','3':'','4':'','5':'','6':'','7':''}
  const moduleContents={
    '1':{title:'Foundation of Sovereignty',theme:'Understanding Personal Power',content:`
      <h3>What is Sovereignty?</h3>
      <p>Sovereignty is your birthright to complete authority over your beingâ€”thoughts, emotions, choices, and energy.</p>
      <div class="practice-box"><h4><i class="fas fa-pen-fancy"></i> Reflection</h4>
        <ul><li>Where are you fully empowered?</li><li>Where do you defer to others?</li><li>What if you chose inner guidance first?</li></ul>
      </div>
      <label><input type="checkbox" id="completeModule1"> Mark complete</label>`},
    '2':{title:'Boundaries & Energy Protection',theme:'Creating Safe Containers',content:`
      <h3>The Power of Healthy Boundaries</h3>
      <p>Boundaries are gates that allow you to choose what enters your field.</p>
      <div class="practice-box"><h4><i class="fas fa-shield-alt"></i> Energy Sphere</h4><p>Visualize a sphere of golden light that filters what serves you.</p></div>
      <label><input type="checkbox" id="completeModule2"> Mark complete</label>`},
    '3':{title:'Authentic Decision Making',theme:'Listening to Inner Wisdom',content:`
      <h3>Reclaim Decision Power</h3>
      <p>Every decision either reinforces sovereignty or gives power away.</p>
      <div class="practice-box"><h4><i class="fas fa-compass"></i> Body Compass</h4><p>Notice expansion vs. contraction for each option.</p></div>
      <label><input type="checkbox" id="completeModule3"> Mark complete</label>`},
    '4':{title:'Sovereign Communication',theme:'Expressing Truth with Power',content:`
      <h3>Speak Your Truth</h3>
      <p>Clarity, compassion, convictionâ€”without controlling outcomes.</p>
      <div class="practice-box"><h4><i class="fas fa-comments"></i> â€œIâ€ Statements</h4><p>â€œI feelâ€¦â€ instead of â€œYou neverâ€¦â€</p></div>
      <label><input type="checkbox" id="completeModule4"> Mark complete</label>`},
    '5':{title:'Financial Sovereignty',theme:'Wealth as Energy Exchange',content:`
      <h3>Money as Energy</h3>
      <p>Create a conscious, empowered relationship with money.</p>
      <div class="practice-box"><h4><i class="fas fa-search-dollar"></i> Money Story</h4><p>Write your money autobiography.</p></div>
      <label><input type="checkbox" id="completeModule5"> Mark complete</label>`},
    '6':{title:'Sovereign Relationships',theme:'Connecting Without Losing Self',content:`
      <h3>Relationships as Mirrors</h3>
      <p>Honor connection and autonomy.</p>
      <div class="practice-box"><h4><i class="fas fa-heart"></i> Relationship Inventory</h4><p>Which relationships support sovereignty?</p></div>
      <label><input type="checkbox" id="completeModule6"> Mark complete</label>`},
    '7':{title:'Living as Sovereign Being',theme:'Integration & Mastery',content:`
      <h3>Embodied Sovereignty</h3>
      <p>Integrate sovereignty into daily life.</p>
      <div class="practice-box"><h4><i class="fas fa-calendar"></i> Routine Design</h4><p>Build a daily practice youâ€™ll keep.</p></div>
      <label><input type="checkbox" id="completeModule7"> Mark complete</label>`}
  };

  /* ---------- Open module modal ---------- */
  function wireModuleButtons(){
    document.querySelectorAll('.module-card[data-module] .module-button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const card=btn.closest('.module-card');
        const id=card.dataset.module;
        const data=moduleContents[id];
        document.getElementById('detailTitle').textContent=data.title;
        document.getElementById('detailTheme').textContent=data.theme;
        document.getElementById('detailContent').innerHTML=(MODULE_AUDIO[id]?`<audio controls style="width:100%"><source src="${MODULE_AUDIO[id]}" type="audio/mpeg"></audio>`:'')+data.content;
        openModal();
        updateModuleStatus(id,'in-progress');
        const ck=document.getElementById('completeModule'+id);
        if(ck){ck.addEventListener('change',e=>updateModuleStatus(id,e.target.checked?'completed':'in-progress'))}
      })
    })
  }
  function openModal(){const m=document.getElementById('moduleModal');m.classList.add('open');m.setAttribute('aria-hidden','false')}
  function closeModal(){const m=document.getElementById('moduleModal');m.classList.remove('open');m.setAttribute('aria-hidden','true')}
  document.getElementById('closeDetail').addEventListener('click',closeModal);
  document.getElementById('moduleModal').addEventListener('click',e=>{if(e.target.id==='moduleModal')closeModal()});

  /* ---------- Sovereign Self tabs ---------- */
  function showSV(id){
    ['sv1','sv2','sv3','sv4','sv5','sv6','sv7'].forEach(s=>{const el=document.getElementById(s);if(el)el.style.display='none'});
    const show=document.getElementById(id); if(show) show.style.display='block';
    document.querySelectorAll('.sv-tab').forEach(t=>t.classList.toggle('active',t.dataset.sv===id));
    if(show) show.scrollIntoView({behavior:'smooth',block:'start'});
  }
  document.querySelectorAll('.sv-tab').forEach(t=>t.addEventListener('click',()=>showSV(t.dataset.sv)));
  document.querySelectorAll('[data-next]').forEach(a=>a.addEventListener('click',(e)=>{e.preventDefault();showSV(a.dataset.next)}));
  document.querySelectorAll('[data-track^="sovereign-"]').forEach(cb =>
    cb.addEventListener('change', () => { updateProgress(); gateAccessAndEligibility(); })
  );

  /* ---------- Progress + eligibility ---------- */
  function updateModuleStatus(id,status){
    const card=document.querySelector(`.module-card[data-module="${id}"]`);
    if(!card){updateProgress();return}
    const ind=card.querySelector('.status-indicator');const txt=card.querySelector('.status-text');
    ind.className='status-indicator';
    if(status==='completed'){ind.classList.add('completed');txt.textContent='Completed'}
    else if(status==='in-progress'){ind.classList.add('in-progress');txt.textContent='In Progress'}
    else{txt.textContent='Not Started'}
    updateProgress();gateAccessAndEligibility();
  }
  function computeEligibility(){
    const completedPrimary=document.querySelectorAll('.module-card[data-module] .status-indicator.completed').length;
    const totalPrimary=document.querySelectorAll('.module-card[data-module]').length;
    const completedSovereign=document.querySelectorAll('[data-track^="sovereign-"]:checked').length;
    const totalSovereign=document.querySelectorAll('[data-track^="sovereign-"]').length;
    const total=totalPrimary+totalSovereign, done=completedPrimary+completedSovereign;
    return {ok: total>0 && done>=total, total, done}
  }
  function updateProgress(){
    const completedPrimary=document.querySelectorAll('.module-card[data-module] .status-indicator.completed').length;
    const totalPrimary=document.querySelectorAll('.module-card[data-module]').length;
    const completedSovereign=document.querySelectorAll('[data-track^="sovereign-"]:checked').length;
    const totalSovereign=document.querySelectorAll('[data-track^="sovereign-"]').length;
    const totalCompleted=completedPrimary+completedSovereign;
    const totalModules=totalPrimary+totalSovereign;
    const pct=Math.round((totalCompleted/Math.max(totalModules,1))*100);
    document.getElementById('progressFill').style.width=pct+'%';
    document.getElementById('progressPct').textContent=`${pct}% Complete`;
    document.getElementById('progressCount').textContent=`${totalCompleted} of ${totalModules} Modules Completed`;
    if(pct===100) showToast('Congratulations! You completed the program! ðŸŽ‰')
  }
  function updateEligibilityUI(){
    const {ok,total,done}=computeEligibility();
    document.getElementById('eligibilityStatus').textContent=ok?'Eligible âœ…':'Not Eligible';
    document.getElementById('eligibilityDesc').textContent= total ? `${done} of ${total} required modules completed` : 'No modules detected';
  }

  /* ---------- Export/Import (no daily tracker) ---------- */
  document.getElementById('exportProgress').addEventListener('click',()=>{
    const data={
      version:2,
      date:new Date().toISOString(),
      modules:[...document.querySelectorAll('.module-card[data-module]')].map(c=>({
        id:c.dataset.module,
        status:c.querySelector('.status-indicator').classList.contains('completed')?'completed':
               c.querySelector('.status-indicator').classList.contains('in-progress')?'in-progress':'not-started'
      })),
      sovereign:[...document.querySelectorAll('[data-track^="sovereign-"]')].map(cb=>({key:cb.dataset.track,checked:cb.checked}))
    };
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='sovereignty-progress.json';a.click();URL.revokeObjectURL(a.href);
    showToast('Progress exported âœ”ï¸');
  });
  document.getElementById('importProgress').addEventListener('click',()=>document.getElementById('importFile').click());
  document.getElementById('importFile').addEventListener('change',e=>{
    const f=e.target.files[0]; e.target.value='';
    if(!f) return;
    const r=new FileReader();
    r.onload=ev=>{
      try{
        const data=JSON.parse(ev.target.result);
        if(!Array.isArray(data.modules)) throw new Error('Invalid file');
        document.querySelectorAll('.module-card[data-module]').forEach(card=>{
          const id=card.dataset.module;
          const found=data.modules.find(m=>m.id==id);
          updateModuleStatus(id,found?found.status:'not-started');
        });
        (data.sovereign||[]).forEach(sv=>{
          const cb=document.querySelector(`[data-track="${sv.key}"]`); if(cb) cb.checked=!!sv.checked;
        });
        gateAccessAndEligibility();
        showToast('Progress imported âœ”ï¸');
      }catch(err){console.error(err);showToast('Import failed â—')}
    };
    r.readAsText(f);
  });

  /* ---------- Timer ---------- */
  (function initTimer(){
    const disp=document.getElementById('timerDisplay');
    const start=document.getElementById('startTimer');
    const pause=document.getElementById('pauseTimer');
    const reset=document.getElementById('resetTimer');
    const timeBtns=document.querySelectorAll('[data-time]');
    let t,remain=600,running=false;
    const draw=()=>{const m=Math.floor(remain/60),s=remain%60;disp.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`}
    start.addEventListener('click',()=>{if(running)return;running=true;start.disabled=true;pause.disabled=false;t=setInterval(()=>{if(remain>0){remain--;draw()}else{clearInterval(t);running=false;start.disabled=false;pause.disabled=true;showToast('Meditation complete âœ…')}},1000)});
    pause.addEventListener('click',()=>{if(!running)return;clearInterval(t);running=false;start.disabled=false;pause.disabled=true});
    reset.addEventListener('click',()=>{clearInterval(t);running=false;remain=600;draw();start.disabled=false;pause.disabled=true});
    timeBtns.forEach(b=>b.addEventListener('click',()=>{remain=parseInt(b.dataset.time,10)*60;draw()}));
    draw();
  })();

  /* ---------- Sovereign eligibility gate (Web3) ---------- */
  // Chain config
  const USE_TESTNET=false;
  const BSC_MAINNET={chainId:'0x38',chainName:'BNB Smart Chain',nativeCurrency:{name:'BNB',symbol:'BNB',decimals:18},rpcUrls:['https://bsc-dataseed.binance.org/'],blockExplorerUrls:['https://bscscan.com/']};
  const BSC_TESTNET={chainId:'0x61',chainName:'BNB Testnet',nativeCurrency:{name:'tBNB',symbol:'tBNB',decimals:18},rpcUrls:['https://bsc-testnet.publicnode.com'],blockExplorerUrls:['https://testnet.bscscan.com/']};
  const TARGET_CHAIN=USE_TESTNET?BSC_TESTNET:BSC_MAINNET;

  // Gate: SÃ³lCoin (must hold >= 5)
  const SOLCOIN_ADDRESS='0x97A10b3889BdC8EE5EF937ebb75b91Ab1a7AA1F0';
  const GATE_MIN_SOL=5;
  const ERC20_MIN_ABI=['function balanceOf(address) view returns (uint256)','function decimals() view returns (uint8)','function symbol() view returns (string)'];

  // NFT Certificate
  const NFT_CONTRACT='0xDA76d35742190283E340dbeE2038ecc978a56950';
  const NFT_URI='ipfs://QmXCJjJJNU15vkha7e3sHTizcTNyDy7Mgqt8CjYMWheb1g/3';
  const NFT_ABI=['function mintTo(address to, string uri)'];

  let web3Modal, externalProvider, ethersProvider, signer, userAddress=null, userChainId=null;

  const gateChip=document.getElementById('gateChip');
  const addrChip=document.getElementById('addrChip');

  function setChip(el, show=true, text=null, ok=false){
    if(!el) return; el.style.display=show?'flex':'none';
    if(text){const span=el.querySelector('span'); if(span) span.textContent=text}
    if(ok){el.classList.add('ok')} else {el.classList.remove('ok')}
  }

  async function connectWallet(){
    try{
      document.querySelector('#connectBtn span').textContent='Connectingâ€¦';
      if(!web3Modal){
        web3Modal=new window.Web3Modal.default({
          cacheProvider:true,
          providerOptions:{ walletconnect:{ package:window.WalletConnectProvider.default, options:{ rpc:{56:BSC_MAINNET.rpcUrls[0],97:BSC_TESTNET.rpcUrls[0]}, chainId:(USE_TESTNET?97:56) } } },
          theme:'dark'
        });
      }
      externalProvider=await web3Modal.connect();
      ethersProvider=new ethers.providers.Web3Provider(externalProvider,'any');
      signer=ethersProvider.getSigner();
      externalProvider.on && externalProvider.on('accountsChanged', onAccountsChanged);
      externalProvider.on && externalProvider.on('chainChanged', onChainChanged);
      externalProvider.on && externalProvider.on('disconnect', async ()=>{await disconnectWallet()});
      const ok=await ensureTargetChain(); if(!ok){await disconnectWallet();return}
      userAddress=await signer.getAddress();
      document.getElementById('addrShort').textContent=short(userAddress);
      setChip(addrChip,true,null,true);
      setChip(gateChip,true,'Checking accessâ€¦',false);
      document.querySelector('#connectBtn span').textContent='Disconnect';
      showToast('Wallet connected âœ”ï¸');
      await gateAccessAndEligibility();
    }catch(e){console.error(e);showToast('Connection canceled');document.querySelector('#connectBtn span').textContent='Connect'}
  }
  async function disconnectWallet(){
    try{ if(web3Modal) await web3Modal.clearCachedProvider(); if(externalProvider?.disconnect) await externalProvider.disconnect(); }catch(_){}
    externalProvider=null; ethersProvider=null; signer=null; userAddress=null; userChainId=null;
    setChip(addrChip,false); setChip(gateChip,false);
    document.querySelector('#connectBtn span').textContent='Connect';
  }
  async function ensureTargetChain(){
    try{
      const cid=await (ethersProvider?.send('eth_chainId',[])||'0x0');
      if(cid && cid.toLowerCase()===TARGET_CHAIN.chainId.toLowerCase()) return true;
      await externalProvider.request({method:'wallet_switchEthereumChain',params:[{chainId:TARGET_CHAIN.chainId}]}); return true;
    }catch(err){
      try{ await externalProvider.request({method:'wallet_addEthereumChain',params:[TARGET_CHAIN]}); return true; }
      catch(e){ showToast('Please switch to BNB Smart Chain â—'); return false; }
    }
  }
  async function onAccountsChanged(accts){
    if(!accts || !accts.length){ showToast('Wallet disconnected'); await disconnectWallet(); return; }
    userAddress=ethers.utils.getAddress(accts[0]); document.getElementById('addrShort').textContent=short(userAddress); await gateAccessAndEligibility();
  }
  async function onChainChanged(){ await ensureTargetChain(); await gateAccessAndEligibility(); }

  async function checkSolGate(){
    if(!ethersProvider || !userAddress){ setChip(gateChip,false); return {ok:false,have:0,sym:'SOL'} }
    try{
      const erc20=new ethers.Contract(SOLCOIN_ADDRESS, ERC20_MIN_ABI, ethersProvider);
      const [dec,sym,bal]=await Promise.all([erc20.decimals(), erc20.symbol().catch(()=> 'SOL'), erc20.balanceOf(userAddress)]);
      const have=parseFloat(ethers.utils.formatUnits(bal,dec)); const ok=have>=GATE_MIN_SOL;
      const gateText=document.getElementById('gateText');
      if(gateText){ gateText.textContent = ok?`Access: ${have.toFixed(2)} ${sym} âœ“`: `Need ${GATE_MIN_SOL} ${sym} (you have ${have.toFixed(2)})`; }
      setChip(gateChip,true,null,ok);
      return {ok,have,sym}
    }catch(e){console.error(e);const gateText=document.getElementById('gateText'); if(gateText) gateText.textContent='Unable to read SÃ³lCoin'; setChip(gateChip,true,null,false);return {ok:false,have:0,sym:'SOL'}}
  }
  async function gateAccessAndEligibility(){
    updateEligibilityUI();
    const { ok: solOk } = await checkSolGate();
    const { ok: modulesOk } = computeEligibility();
    const eligible = solOk && modulesOk;
    document.getElementById('eligibilityStatus').textContent = eligible ? 'Eligible âœ…' : (solOk ? 'Complete all modules' : 'Not Eligible');
    document.getElementById('eligibilityDesc').textContent = eligible ? 'All modules complete and SÃ³lCoin requirement met' :
      solOk ? 'Finish all required modules to unlock your certificate' :
      `Hold at least ${GATE_MIN_SOL} SÃ³lCoins and complete modules`;
    document.getElementById('claimCert').disabled=!eligible;
  }
  async function claimCertificate(){
    const { ok: modulesOk }=computeEligibility(); const { ok: solOk }=await checkSolGate();
    if(!(modulesOk&&solOk)){showToast('Not eligible yet â—');return}
    try{
      const nft=new ethers.Contract(NFT_CONTRACT,NFT_ABI,signer);
      const tx=await nft.mintTo(userAddress,NFT_URI); showToast('Minting NFTâ€¦'); await tx.wait(); showToast('ðŸŽ‰ Certificate NFT minted!')
    }catch(e){console.error(e);showToast('Mint failed â—')}
  }
  document.getElementById('claimCert').addEventListener('click',claimCertificate);
  document.getElementById('connectBtn').addEventListener('click',async()=>{
    if(signer && userAddress){await disconnectWallet()} else {await connectWallet()}
  });
  document.getElementById('copyAddr').addEventListener('click',async()=>{
    try{await navigator.clipboard.writeText(userAddress||'');showToast('Address copied âœ”ï¸')}catch{showToast('Copy failed')}
  });

  /* ---------- Init ---------- */
  function init(){
    wireModuleButtons();
    updateProgress();
    updateEligibilityUI();
    // auto-connect if cached
    try{const cached=localStorage.getItem('WEB3_CONNECT_CACHED_PROVIDER'); if(cached) connectWallet()}catch{}
  }
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
