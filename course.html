<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KLY Legacy Course</title>

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #050505;
      color: #e0e0e0;
      font-family: 'Rajdhani', sans-serif;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    h2 {
      font-family: 'Orbitron', sans-serif;
      color: #00ffe7;
    }
    section {
      background: rgba(0, 255, 231, 0.05);
      border: 1px solid rgba(0, 255, 231, 0.15);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 800px;
      box-shadow: 0 0 30px rgba(0, 255, 231, 0.1);
    }
    button {
      background: linear-gradient(135deg, #00ffe7, #ff00aa);
      color: #000;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      margin-top: 1rem;
      box-shadow: 0 0 10px rgba(0, 255, 231, 0.3);
    }
    button:hover {
      box-shadow: 0 0 20px rgba(0, 255, 231, 0.5);
      transform: scale(1.02);
    }
    .back-button {
      background: linear-gradient(135deg, #ff00aa, #00ffe7);
      color: #000;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      margin-top: 1rem;
      margin-right: 1rem;
      box-shadow: 0 0 10px rgba(255, 0, 170, 0.3);
    }
    .back-button:hover {
      box-shadow: 0 0 20px rgba(255, 0, 170, 0.5);
      transform: scale(1.02);
    }
    .module {
      transition: opacity 0.5s ease-in-out;
    }
    .hidden {
      display: none;
    }
    .module.active {
      opacity: 1;
    }
    .status { 
      margin-top: 1rem; 
      font-weight: bold; 
      color: #00ff99; 
    }
    .module-title { 
      font-size: 1.8rem; 
      margin-bottom: 1rem; 
    }
    .module-text { 
      margin-bottom: 1rem; 
      color: #ccc; 
    }
    img {
      max-width: 250px;
      margin-top: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 255, 231, 0.3);
    }
    .toast {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #00ffe7;
    color: #000;
    padding: 14px 22px;
    border-radius: 8px;
    font-weight: bold;
    box-shadow: 0 0 15px #00ffe7;
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.4s ease;
    z-index: 9999;
  }

  .toast.show {
    opacity: 1;
    transform: translateY(0);
  }

  .toast.hidden {
    display: no
  </style>
</head>
<body>

<section id="accessPanel">
  <h2>KLY Legacy Course</h2>
  <p>Complete the journey. Unlock legacy knowledge. Mint your NFT certification.</p>
  <button onclick="connectWallet()">Connect Wallet</button>
  <button onclick="verifyAccess()">Verify Access (500 KLY)</button>
  <p id="accessStatus" class="status"></p>
</section>

<div id="module1" class="hidden">
  <h2 class="module-title">Module 1: Web3 Foundations</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Web3 is not just the next version of the internet—it's a complete reimagining of how ownership, identity, and value move online. In this module, you'll gain a foundational understanding of what Web3 is, how it works, and why it matters.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    • The evolution from Web1 → Web2 → Web3<br>
    • The role of decentralization in empowering users<br>
    • Blockchain basics: nodes, consensus, and immutability<br>
    • Wallets, private keys, and digital identity<br>
    • Web3 tools: ENS, IPFS, DAOs, and more
  </p>
  <hr>
  <p class="module-text"><strong>1. Web1, Web2, and Web3: The Shift in Power</strong><br>
    • Web1 (Read-Only): Static websites, early internet, limited interaction.<br>
    • Web2 (Read + Write): Platforms like Facebook, YouTube, Amazon allow content creation but centralize power and data ownership.<br>
    • Web3 (Read + Write + Own): Users own their data, assets, and identity. No middlemen—just protocols and smart contracts.<br><br>
    Web3 gives individuals the tools to build, trade, and govern without centralized permission.
  </p>
  <hr>
  <p class="module-text"><strong>2. What Makes Web3 Different?</strong><br>
    Web3 runs on blockchains—distributed networks that record transactions without relying on a single authority. This enables trustless systems where code replaces institutions.<br><br>
    You'll learn:<br>
    • How consensus (Proof of Work / Stake) secures networks<br>
    • Why transparency and immutability build trust<br>
    • The power of on-chain verifiability for assets and identity
  </p>
  <hr>
  <p class="module-text"><strong>3. Wallets, Private Keys, and Your Digital Identity</strong><br>
    A Web3 wallet like MetaMask isn't just for holding crypto—it's your passport to the decentralized world.<br>
    • Your address is your public identity.<br>
    • Your private key gives you control (never share it).<br>
    • You'll use wallets to log in, sign contracts, manage assets, and vote in DAOs.<br><br>
    Ownership begins with custody—and in Web3, you are your own bank.
  </p>
  <hr>
  <p class="module-text"><strong>4. Tools That Power the Ecosystem</strong><br>
    Here are core tools that bring Web3 to life:<br>
    • ENS (Ethereum Name Service): Human-readable wallet addresses (e.g., yourname.eth).<br>
    • IPFS: A decentralized file system for hosting websites, media, and data.<br>
    • DAOs: Organizations governed by token holders, not CEOs.<br>
    • Soulbound Tokens: Non-transferable NFTs tied to achievements or credentials (like this course certification).<br><br>
    These tools form the foundation for the KLY ecosystem.
  </p>
  <hr>
  <p class="module-text"><strong>5. Why It Matters: The Mission of Web3</strong><br>
    Web3 isn't just about money or tech—it's about freedom, ownership, and opportunity.<br>
    • In Web2, you are the product.<br>
    • In Web3, you are the owner—of your assets, your data, your digital destiny.<br><br>
    The future belongs to those who understand and harness this shift.
  </p>
  <hr>
  <p class="module-text"><em>Next: Tokenization (Module 2)</em><br>
    Now that you understand the infrastructure and philosophy of Web3, it's time to learn how tokens bring this world to life.<br><br>
    → Click "Next" to continue to Module 2.
  </p>
  <button onclick="showNextModule(2)">Next</button>
</div>
  
<div id="module2" class="hidden">
  <h2 class="module-title">Module 2: Tokenization</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Tokenization is the engine of Web3. It allows us to represent value, ownership, access, and identity on-chain in programmable form. In this module, you'll learn how tokens transform systems, empower creators, and fuel entire ecosystems.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    • What tokens are and how they work<br>
    • ERC standards (ERC-20, ERC-721, ERC-1155)<br>
    • Token functions: minting, burning, transferring<br>
    • Use cases: governance, access, rewards, equity<br>
    • Designing tokenomics for sustainability
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is a Token?</strong><br>
    A token is a digital representation of value built on a blockchain. It can be:<br>
    • Fungible (interchangeable, like money – e.g., ERC-20)<br>
    • Non-fungible (unique, like art or ID – e.g., ERC-721)<br>
    • Semi-fungible (multi-use items – e.g., ERC-1155)<br><br>
    Tokens act as digital building blocks that give users utility, ownership, and participation rights.
  </p>
  <hr>
  <p class="module-text"><strong>2. Token Standards Explained</strong><br>
    • <strong>ERC-20:</strong> The most common standard for fungible tokens (like KLY). Every token is equal in value and function.<br>
    • <strong>ERC-721:</strong> Used for NFTs. Each token has unique metadata and value (e.g., certificates, collectibles).<br>
    • <strong>ERC-1155:</strong> Combines fungible and non-fungible logic in one contract. Ideal for gaming, coupons, and bundled assets.<br><br>
    Understanding standards helps you decide how to design your project's token system.
  </p>
  <hr>
  <p class="module-text"><strong>3. Core Token Mechanics</strong><br>
    Every token has the ability to:<br>
    • Mint: Create new tokens (with optional permissions)<br>
    • Burn: Remove tokens from circulation<br>
    • Transfer: Move tokens between wallets<br>
    • Approve/Spend: Allow contracts to move tokens on your behalf<br><br>
    Mastering these functions allows you to build logic that reflects your business goals, incentives, or governance needs.
  </p>
  <hr>
  <p class="module-text"><strong>4. Real-World Use Cases</strong><br>
    • <strong>Utility:</strong> Access to features, content, or communities (like KLY for courses)<br>
    • <strong>Governance:</strong> Voting rights in DAOs or platforms<br>
    • <strong>Incentives:</strong> Rewards for activity, referrals, or staking<br>
    • <strong>Equity:</strong> Represent project ownership, revenue-sharing, or royalties<br>
    • <strong>Identity:</strong> Proof of membership, credentials, or achievements via NFTs<br><br>
    Tokens become programmable assets that work on your behalf.
  </p>
  <hr>
  <p class="module-text"><strong>5. Building Sustainable Tokenomics</strong><br>
    Creating a token is easy. Designing a long-term system of value takes strategy.<br><br>
    Good tokenomics answers:<br>
    • Who receives tokens?<br>
    • How are they distributed over time?<br>
    • Is supply fixed or inflationary?<br>
    • How is demand created and sustained?<br>
    • What happens if demand falls?<br><br>
    We'll explore real examples (like Uniswap, Aave, and KLY) to show how token models succeed—or fail.
  </p>
  <hr>
  <p class="module-text"><em>Next: Smart Contracts (Module 3)</em><br>
    Now that you know what tokens are, it's time to explore how they're powered—through smart contracts.<br><br>
    → Click "Next" to continue to Module 3.
  </p>
  <button class="back-button" onclick="showPreviousModule(1)">Back</button>
  <button onclick="showNextModule(3)">Next</button>
</div>
  
<div id="module3" class="hidden">
  <h2 class="module-title">Module 3: Smart Contracts</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Smart contracts are the backbone of Web3 automation. They're not contracts in the legal sense, but self-executing code that runs on the blockchain when predefined conditions are met. In this module, you'll explore how smart contracts replace intermediaries and enable trustless, decentralized systems.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    • What smart contracts are and how they work<br>
    • Solidity programming basics<br>
    • Use cases: DeFi, DAOs, NFTs, governance<br>
    • Key functions, permissions, and upgradeability<br>
    • Security concerns: reentrancy, exploits, and audits
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is a Smart Contract?</strong><br>
    A smart contract is an immutable piece of code stored on a blockchain. It automatically executes actions when its conditions are satisfied—no human needed.<br><br>
    Think of it like a digital vending machine:<br>
    • Input a token<br>
    • Conditions are checked<br>
    • Output is delivered (product, vote, reward, NFT)<br><br>
    There's no need to trust a person or company—you trust the code.
  </p>
  <hr>
  <p class="module-text"><strong>2. How Smart Contracts Are Built</strong><br>
    Most smart contracts are written in Solidity, Ethereum's native programming language.<br><br>
    Each contract contains:<br>
    • State variables (like a balance or owner)<br>
    • Functions (to deposit, withdraw, mint, transfer, vote, etc.)<br>
    • Modifiers to restrict access (e.g., <code>onlyOwner</code>)<br>
    • Events to log actions to the blockchain<br><br>
    Every transaction costs gas (BNB on BSC), which pays to execute that contract logic.
  </p>
  <hr>
  <p class="module-text"><strong>3. Real-World Applications</strong><br>
    • <strong>NFTs:</strong> Mint, transfer, and verify ownership of unique assets<br>
    • <strong>DAOs:</strong> Proposals, voting, and execution without a CEO<br>
    • <strong>DeFi:</strong> Stake tokens, swap assets, earn yield<br>
    • <strong>Courses:</strong> Unlock modules, verify access, mint certifications (like this one)<br><br>
    Smart contracts make Web3 apps decentralized, trustless, and interactive.
  </p>
  <hr>
  <p class="module-text"><strong>4. Security & Best Practices</strong><br>
    Because smart contracts manage value, security is critical.<br><br>
    Common threats include:<br>
    • Reentrancy attacks (like the infamous DAO hack)<br>
    • Integer overflows/underflows<br>
    • Poor access controls<br>
    • Irreversible logic without upgrade paths<br><br>
    Use trusted libraries like OpenZeppelin, platforms like Thirdweb, and multisig wallets (e.g., Gnosis Safe). Always audit before deploying.
  </p>
  <hr>
  <p class="module-text"><strong>5. No-Code Tools for Creators</strong><br>
    Don't know how to code? Web3 has tools for you:<br>
    • <strong>Thirdweb:</strong> Deploy tokens, NFTs, and DAOs with a UI<br>
    • <strong>Remix IDE:</strong> Browser-based Solidity editor and simulator<br>
    • <strong>Snapshot & Tally:</strong> Build DAO voting platforms without code<br><br>
    These tools make smart contracts accessible to anyone with a vision.
  </p>
  <hr>
  <p class="module-text"><em>Next: DeFi, Credit & Capital (Module 4)</em><br>
    Now that you understand automation, let's explore how to use smart contracts for financing, lending, and yield in DeFi.<br><br>
    → Click "Next" to continue to Module 4.
  </p>
  <button class="back-button" onclick="showPreviousModule(2)">Back</button>
  <button onclick="showNextModule(4)">Next</button>
</div>
  
<div id="module4" class="hidden">
  <h2 class="module-title">Module 4: DeFi, Credit & Capital</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    Decentralized Finance (DeFi) replaces banks with smart contracts. It offers open access to financial tools like borrowing, lending, staking, and trading—without middlemen, paperwork, or gatekeepers. In this module, you'll learn how to unlock capital and generate yield using your assets.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    • How DeFi protocols like Aave, Uniswap, and Compound work<br>
    • Liquidity pools and automated market makers (AMMs)<br>
    • Yield farming, staking, and earning passive income<br>
    • Building credit in Web3<br>
    • DAO treasuries and capital strategies
  </p>
  <hr>
  <p class="module-text"><strong>1. What Is DeFi?</strong><br>
    DeFi stands for Decentralized Finance. It uses smart contracts to provide financial services without relying on banks or brokers.<br><br>
    With DeFi, you can:<br>
    • Lend and borrow crypto<br>
    • Trade assets on decentralized exchanges (DEXs)<br>
    • Earn interest through staking or liquidity pools<br>
    • Access capital 24/7 with no middleman<br><br>
    No KYC. No banks. Just transparent code and collateral.
  </p>
  <hr>
  <p class="module-text"><strong>2. Understanding Liquidity Pools</strong><br>
    Liquidity pools are smart contracts that hold pairs of tokens. Users deposit assets to enable trading and earn fees.<br><br>
    Example:<br>
    • You deposit KLY and USDT into a pool<br>
    • Traders swap between these assets<br>
    • You earn a share of the trading fees<br><br>
    These pools are powered by AMMs (automated market makers), like those on PancakeSwap or Uniswap, that use math instead of order books.
  </p>
  <hr>
  <p class="module-text"><strong>3. Yield Farming & Passive Income</strong><br>
    DeFi helps you grow assets without selling them. Popular methods include:<br>
    • <strong>Staking:</strong> Lock tokens to secure a protocol and earn rewards<br>
    • <strong>Yield farming:</strong> Provide liquidity to earn tokens and incentives<br>
    • <strong>Auto-compounders:</strong> Platforms like Beefy or Autofarm that reinvest profits automatically<br><br>
    High yields often come with high risks. Always DYOR (Do Your Own Research).
  </p>
  <hr>
  <p class="module-text"><strong>4. Web3 Credit & On-Chain Reputation</strong><br>
    Traditional credit scores don't apply in Web3. Instead:<br>
    • Reputation protocols track your activity (e.g., Lens, Gitcoin Passport)<br>
    • Soulbound NFTs can show proof of trust or achievement<br>
    • Protocols offer loans based on on-chain behavior or collateral<br><br>
    This opens borderless credit where your actions—not your address—earn access.
  </p>
  <hr>
  <p class="module-text"><strong>5. DAO Treasuries & Capital Allocation</strong><br>
    DAOs often manage large treasuries. Here's how they operate:<br>
    • Multisig wallets like Gnosis Safe store funds securely<br>
    • Community members propose and vote on how funds are used<br>
    • Treasuries may hold stablecoins, tokens, LP assets, or NFTs<br><br>
    Tools like Snapshot and Tally allow decentralized budget management with transparency and alignment.
  </p>
  <hr>
  <p class="module-text"><em>Next: Ownership & Legacy (Module 5)</em><br>
    Now that you can earn and manage assets, the final step is preserving them—and planning your legacy.<br><br>
    → Click "Next" to continue to Module 5.
  </p>
  <button class="back-button" onclick="showPreviousModule(3)">Back</button>
  <button onclick="showNextModule(5)">Next</button>
</div>
  
<div id="module5" class="hidden">
  <h2 class="module-title">Module 5: Ownership & Legacy</h2>
  <p class="module-text"><strong>Introduction:</strong><br>
    In Web3, true wealth isn't just about earning tokens—it's about protecting them, governing them, and passing them on. This module explores how to secure your digital assets, build legacy systems, and plan for long-term value transfer through decentralized tools.
  </p>
  <hr>
  <p class="module-text"><strong>Key Topics Covered:</strong><br>
    • Multisig wallets and estate planning<br>
    • Family DAOs and on-chain succession<br>
    • Decentralized identity and data sovereignty<br>
    • NFT wills and token inheritance<br>
    • Building a legacy through education and smart contracts
  </p>
  <hr>
  <p class="module-text"><strong>1. Ownership in the Digital Age</strong><br>
    In Web2, companies own your identity and data. In Web3, you reclaim control:<br><br>
    • Your wallet is your bank<br>
    • Your private key is your signature<br>
    • Your tokens and NFTs are your assets<br>
    • Your on-chain identity is your reputation<br><br>
    With great power comes responsibility. If you lose access, there's no "forgot password." That's why planning is essential.
  </p>
  <hr>
  <p class="module-text"><strong>2. Multisig Wallets & DAO Structures</strong><br>
    A multisig wallet like Gnosis Safe requires multiple approvals for transactions. This adds security and enables family or group governance.<br><br>
    Example setups:<br>
    • 3-of-5 family members to release inheritance<br>
    • Parent-child co-managed education funds<br>
    • Legacy DAOs to distribute resources based on votes<br><br>
    DAOs can preserve values and wealth across generations.
  </p>
  <hr>
  <p class="module-text"><strong>3. NFT Wills & Smart Inheritance</strong><br>
    Smart contracts can automate estate plans:<br><br>
    • Soulbound NFTs represent inheritance rights<br>
    • Time-locked contracts or activity triggers pass assets to heirs<br>
    • Encrypted instructions or credentials stored on IPFS<br><br>
    This system avoids probate, delays, and court disputes. It's programmable, transparent, and trustless.
  </p>
  <hr>
  <p class="module-text"><strong>4. Protecting Privacy & Identity</strong><br>
    Your identity is also part of your legacy. Use decentralized tools to protect it:<br><br>
    • ENS and Sign-In With Ethereum for seamless Web3 identity<br>
    • Verifiable Credentials to prove roles, relationships, or certifications<br>
    • IPFS + encryption to store private documents securely<br><br>
    Choose what your legacy reveals—and to whom.
  </p>
  <hr>
  <p class="module-text"><strong>5. Legacy as a Living System</strong><br>
    Legacy isn't just about passing on assets—it's about passing on values, systems, and empowerment.<br><br>
    • Automate distributions with smart contracts<br>
    • Educate heirs about wallets, DAOs, and on-chain security<br>
    • Use NFTs, DAOs, and tokens to preserve your philosophy<br><br>
    With KLY, your impact can live on through the tools you leave behind.
  </p>
  <hr>
  <p class="module-text"><em>You've Completed the KLY Legacy Course!</em><br>
    Click below to mint your NFT Certificate of Completion and officially join the ranks of digital legacy builders.
  </p>
  <button class="back-button" onclick="showPreviousModule(4)">Back</button>
  <button onclick="showNextModule('mint')">Complete Course</button>
</div>

<div id="mintSection" class="hidden">
  <h2>Claim Your NFT Certificate</h2>
  <img src="https://ipfs.io/ipfs/bafybeihkmkaf2mgx7xkrnkhmzd2uvhr6ddgj6z3vkqcgnvlaa3z7x263r4" alt="NFT Certificate">
  <button onclick="mintNFT()">Mint NFT</button>
  <p id="mintStatus" class="status"></p>
</div>


  <div id="toast" class="toast hidden"></div>
<!-- Dependencies -->
<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>

<script>
  const KLY_TOKEN = "0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52";
  const NFT_CONTRACT = "0xc75f0ea874c8f7a9493ca9d5a7d354359bf0e79b";

  const KLY_ABI = [{
    constant: true,
    inputs: [{ name: "owner", type: "address" }],
    name: "balanceOf",
    outputs: [{ name: "", type: "uint256" }],
    type: "function"
  }];

  const NFT_ABI = [{
    "inputs": [
      { "internalType": "address", "name": "to", "type": "address" },
      { "internalType": "uint256", "name": "amount", "type": "uint256" },
      { "internalType": "string", "name": "baseURI", "type": "string" },
      { "internalType": "bytes", "name": "data", "type": "bytes" }
    ],
    "name": "mint",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  }];

  let wallet = null;
  let web3;

  async function connectWallet() {
    if (!window.ethereum) {
      alert("Please install MetaMask.");
      return false;
    }

    try {
      const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
      wallet = accounts[0];
      web3 = new Web3(window.ethereum);

      document.getElementById("walletAddress").innerText = `${wallet.slice(0, 6)}...${wallet.slice(-4)}`;
      document.getElementById("walletAddress").style.display = "block";
      document.getElementById("connectWallet").style.display = "none";
      document.getElementById("accessStatus").innerText = "Wallet connected";

      return true;
    } catch (err) {
      console.error("Wallet connect error:", err);
      return false;
    }
  }

  async function verifyAccess() {
    if (!wallet) {
      const connected = await connectWallet();
      if (!connected) return;
    }

    const chainId = await window.ethereum.request({ method: 'eth_chainId' });
    if (chainId !== "0x38") {
      document.getElementById("accessStatus").innerText = "Please switch to BNB Smart Chain.";
      return;
    }

    try {
      const contract = new web3.eth.Contract(KLY_ABI, KLY_TOKEN);
      const balance = await contract.methods.balanceOf(wallet).call();
      const balanceEth = web3.utils.fromWei(balance, "ether");

      if (parseFloat(balanceEth) >= 500) {
        document.getElementById("accessPanel").classList.add("hidden");
        document.getElementById("module1").classList.remove("hidden");
      } else {
        document.getElementById("accessStatus").innerText = 
          `Access Denied: You hold ${parseFloat(balanceEth).toFixed(2)} KLY (500 required)`;
      }
    } catch (err) {
      console.error("Access check error:", err);
      document.getElementById("accessStatus").innerText = `Error: ${err.message}`;
    }
  }

  async function mintNFT() {
    if (!wallet) {
      const connected = await connectWallet();
      if (!connected) return;
    }

    try {
      const contract = new web3.eth.Contract(NFT_ABI, NFT_CONTRACT);
      const baseURI = "ipfs://bafybeihkmkaf2mgx7xkrnkhmzd2uvhr6ddgj6z3vkqcgnvlaa3z7x263r4";
      const data = "0x";

      const gasEstimate = await contract.methods
        .mint(wallet, 1, baseURI, data)
        .estimateGas({ from: wallet });

      const tx = await contract.methods
        .mint(wallet, 1, baseURI, data)
        .send({
          from: wallet,
          value: web3.utils.toWei("0", "ether"),
          gas: Math.floor(gasEstimate * 1.2)
        });

      document.getElementById("mintStatus").innerHTML = `
        ✅ NFT minted successfully!<br>
        <a href="https://bscscan.com/tx/${tx.transactionHash}" target="_blank" style="color:#00ffe7;">
          View on BscScan
        </a>
      `;
      showToast("✅ NFT minted successfully!");

    } catch (err) {
      console.error("Mint failed:", err);
      let errorMessage = err.message;

      if (err.message.includes("revert")) {
        errorMessage = err.message.match(/reason string: '(.+?)'/)?.[1] || err.message;
      }

      document.getElementById("mintStatus").innerText = `Mint failed: ${errorMessage}`;
      showToast(`❌ Mint failed: ${errorMessage}`);
    }
  }

  function showNextModule(currentModule) {
    document.querySelectorAll('[id^="module"]').forEach(el => {
      el.classList.add('hidden');
    });

    const nextModuleNum = parseInt(currentModule) + 1;
    const nextModule = document.getElementById(`module${nextModuleNum}`);

    if (nextModule) {
      nextModule.classList.remove('hidden');
    } else {
      alert("Congratulations! You've completed all modules.");
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function showPreviousModule(currentModule) {
    document.querySelectorAll('[id^="module"]').forEach(el => {
      el.classList.add('hidden');
    });

    const prevModuleNum = parseInt(currentModule) - 1;
    const prevModule = document.getElementById(`module${prevModuleNum}`);

    if (prevModule) {
      prevModule.classList.remove('hidden');
    } else {
      document.getElementById(`module${currentModule}`).classList.remove('hidden');
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Expose to HTML
  window.connectWallet = connectWallet;
  window.verifyAccess = verifyAccess;
  window.mintNFT = mintNFT;
  window.showNextModule = showNextModule;
  window.showPreviousModule = showPreviousModule;
</script>
