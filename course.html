<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KLY Legacy Course</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <div class="course-container">
    <h1 class="course-title">KLY Legacy Course</h1>

    <!-- Module 1: Foundation -->
    <section class="module" id="module1">
      <h2>Module 1: Foundation</h2>
      <p>Learn how to structure your business legally using LLCs, trusts, and strategic ownership setup. This module covers New Jersey requirements and how to set up long-term asset protection.</p>
      <h3>Overview</h3>
      <p>This module lays the groundwork for your journey into Web3 entrepreneurship...</p>
      <!-- Objectives, Instructions, Tools, Example (your full content continues here) -->
    </section>

    <!-- Module 2: Tokenization -->
    <section class="module" id="module2">
      <h2>Module 2: Tokenization</h2>
      <p>This module introduces the process of creating your own token...</p>
      <!-- Objectives, Instructions, Tools, Example (continue content) -->
    </section>

    <!-- Module 3: Web3 Business -->
    <section class="module" id="module3">
      <h2>Module 3: Web3 Business</h2>
      <p>This module teaches how to build a business around your token...</p>
      <!-- Continue full details -->
    </section>

    <!-- Module 4: Credit & Capital -->
    <section class="module" id="module4">
      <h2>Module 4: Credit & Capital</h2>
      <p>This module focuses on accessing funding and building business credit...</p>
      <!-- Continue full details -->
    </section>

    <!-- Module 5: Ownership & Legacy -->
    <section class="module" id="module5">
      <h2>Module 5: Ownership & Legacy</h2>
      <p>This module helps protect and preserve wealth through trusts and smart contracts...</p>
      <!-- Continue full details -->
    </section>

    <!-- Certificate Claim -->
    <section class="module" id="certificate-claim">
      <h2>Claim Your NFT Certificate</h2>
      <p>You've completed the KLY Legacy Course. Now you can claim your official NFT Certificate on BNB Smart Chain to verify your knowledge and commitment to legacy building.</p>
      <button id="claimCertificateBtn" class="claim-nft-button">Claim NFT Certificate</button>
    </section>
  </div>

  <script>
    window.addEventListener("load", async () => {
      if (typeof window.ethereum !== "undefined") {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        try {
          await provider.send("eth_requestAccounts", []);
        } catch (err) {
          console.warn("Wallet not connected automatically.");
        }
      }
    });

    document.getElementById("claimCertificateBtn").addEventListener("click", async () => {
      if (typeof window.ethereum === "undefined") {
        alert("Please install MetaMask to continue.");
        return;
      }

      try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const accounts = await provider.send("eth_requestAccounts", []);
        const user = accounts[0];

        if (!user) {
          alert("Please connect your wallet to mint your certificate.");
          return;
        }

        const nftContractAddress = "0xDA76d35742190283E340dbeE2038ecc978a56950";
        const nftABI = [
          {
            "inputs": [
              { "internalType": "address", "name": "to", "type": "address" },
              { "internalType": "int24", "name": "tickLower", "type": "int24" },
              { "internalType": "int24", "name": "tickUpper", "type": "int24" },
              { "internalType": "uint128", "name": "amount", "type": "uint128" },
              { "internalType": "bytes", "name": "data", "type": "bytes" }
            ],
            "name": "mint",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
          }
        ];

        const signer = provider.getSigner();
        const nftContract = new ethers.Contract(nftContractAddress, nftABI, signer);
        await nftContract.mint(user, -887220, 887220, 1, "0x");

        alert("NFT Certificate Minted Successfully!");
      } catch (err) {
        console.error(err);
        alert("Minting failed. Please try again.");
      }
    });
  </script>
</body>
</html>

