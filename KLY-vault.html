<!-- Styled KLY Oracle Section -->
<section id="kly-oracle" style="
  background: radial-gradient(ellipse at center, #0f0f1a 0%, #000000 100%);
  padding: 5rem 1rem;
  position: relative;
  overflow: hidden;
  border-bottom: 1px solid rgba(147, 112, 219, 0.2);
">
  <!-- Animated background elements -->
  <div style="
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.15;
    overflow: hidden;
    z-index: 0;
  ">
    <div style="
      position: absolute;
      top: 20%;
      left: 15%;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(147, 112, 219, 0.4) 0%, rgba(0,0,0,0) 70%);
      filter: blur(30px);
      animation: float 15s infinite ease-in-out;
    "></div>
    <div style="
      position: absolute;
      bottom: 10%;
      right: 10%;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(75, 0, 130, 0.3) 0%, rgba(0,0,0,0) 70%);
      filter: blur(20px);
      animation: float 12s infinite ease-in-out reverse;
    "></div>
  </div>

  <!-- Content container -->
  <div style="
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  ">
    <!-- Section header -->
    <h2 class="section-title" style="
      color: #ffffff;
      font-family: 'Inter', sans-serif;
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 700;
      text-align: center;
      margin-bottom: 2rem;
      letter-spacing: -0.5px;
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
    ">
      <span style="
        display: inline-block;
        position: relative;
      ">
        KLY Oracle
        <span style="
          position: absolute;
          bottom: -8px;
          left: 0;
          width: 100%;
          height: 2px;
          background: linear-gradient(90deg, #9370DB, #4B0082);
          border-radius: 2px;
        "></span>
      </span>
    </h2>

    <!-- Oracle iframe container -->
    <div style="
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      transform: translateY(0);
      border: 1px solid rgba(147, 112, 219, 0.2);
    ">
      <!-- Loading overlay -->
      <div id="oracle-loader" style="
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(15, 15, 26, 0.8);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 2;
        transition: opacity 0.4s ease;
      ">
        <div style="
          width: 60px;
          height: 60px;
          border: 4px solid rgba(147, 112, 219, 0.2);
          border-top-color: #9370DB;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 1.5rem;
        "></div>
        <p style="
          color: rgba(255, 255, 255, 0.8);
          font-size: 1rem;
          font-family: 'Inter', sans-serif;
          margin: 0;
        ">Initializing Oracle Connection...</p>
      </div>

      <!-- Oracle iframe -->
      <iframe 
        id="oracle-iframe"
        src="https://oraclekly.replit.dev"
        width="100%" 
        height="1000px" 
        style="
          border: none;
          display: block;
          background: #0a0a12;
        " 
        allowfullscreen
        loading="eager"
      ></iframe>
    </div>
  </div>
</section>

<!-- Animation styles -->
<style>
  @keyframes float {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-20px) translateX(10px); }
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    #kly-oracle {
      padding: 3rem 1rem;
    }
    
    #oracle-iframe {
      height: 800px;
    }
  }

  @media (max-width: 480px) {
    #oracle-iframe {
      height: 600px;
    }
  }
</style>

<!-- JavaScript for loading state -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const iframe = document.getElementById('oracle-iframe');
    const loader = document.getElementById('oracle-loader');
    
    // Show loading state initially
    loader.style.display = 'flex';
    
    // Hide loader when iframe loads
    iframe.addEventListener('load', function() {
      setTimeout(function() {
        loader.style.opacity = '0';
        setTimeout(function() {
          loader.style.display = 'none';
        }, 400);
      }, 500);
    });
    
    // Handle potential iframe errors
    iframe.addEventListener('error', function() {
      loader.innerHTML = `
        <div style="text-align: center; color: #ff6b6b; margin-bottom: 1rem;">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
        </div>
        <p style="color: rgba(255, 255, 255, 0.8); text-align: center;">
          Failed to load Oracle interface.<br>
          Please refresh or check your connection.
        </p>
        <button onclick="window.location.reload()" style="
          margin-top: 1rem;
          background: rgba(147, 112, 219, 0.2);
          color: white;
          border: none;
          padding: 0.5rem 1.5rem;
          border-radius: 6px;
          cursor: pointer;
          transition: background 0.2s ease;
        ">
          Retry
        </button>
      `;
    });
  });
</script>
