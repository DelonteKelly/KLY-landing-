<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KLY Launchpad - BNB Chain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="KLY Launchpad - The premier platform for initial DEX offerings on BNB Chain">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00ffe7;
      --secondary: #ff00aa;
      --bg-dark: #0b0b0b;
      --text-light: #e0e0e0;
      --card-glow: 0 0 15px rgba(0, 255, 231, 0.5);
      --success: #00ff88;
      --warning: #ffaa00;
      --error: #ff3860;
      --bnb-yellow: #F0B90B;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Rajdhani', sans-serif;
      background: linear-gradient(135deg, #050505, #0f0f0f);
      color: var(--text-light);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
    }
    body::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at 20% 30%, rgba(0, 255, 231, 0.1), transparent 20%), radial-gradient(circle at 80% 70%, rgba(255, 0, 170, 0.1), transparent 20%);
      z-index: -1;
    }
    .card {
      background: rgba(15, 15, 15, 0.7);
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: var(--card-glow), inset 0 0 10px rgba(0, 255, 231, 0.2);
      backdrop-filter: blur(12px);
      max-width: 550px;
      width: 90%;
      text-align: center;
      border: 1px solid rgba(0, 255, 231, 0.2);
    }
    h1 {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
      text-shadow: 0 0 10px var(--primary);
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .network-badge {
      background: rgba(240, 185, 11, 0.2);
      color: var(--bnb-yellow);
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.9rem;
      border: 1px solid var(--bnb-yellow);
      margin-bottom: 1rem;
      display: inline-block;
    }
    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 2rem;
    }
    button {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      color: #000;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 0.9rem 2rem;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(0, 255, 231, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: 0.3s ease;
    }
    button:hover {
      box-shadow: 0 0 30px rgba(255, 0, 170, 0.7);
      transform: translateY(-3px);
    }
    button:disabled {
      background: #555;
      box-shadow: none;
      cursor: not-allowed;
      opacity: 0.7;
    }
    #walletAddress {
      margin-top: 1.5rem;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      padding: 0.8rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 231, 0.2);
      color: var(--primary);
    }
    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 8px;
      background: var(--error);
    }
    .status-indicator.connected {
      background: var(--success);
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
    }
    .token-info {
      margin-top: 2rem;
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 231, 0.2);
      text-align: left;
    }
    .token-balance {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
      font-size: 1.1rem;
      margin-top: 0.5rem;
    }
    .action-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(15, 15, 15, 0.9);
      padding: 1rem;
      border-radius: 4px;
      transform: translateX(120%);
      transition: transform 0.3s ease;
      z-index: 1000;
      max-width: 300px;
      border-left: 4px solid var(--primary);
    }
    .notification.show { transform: translateX(0); }
    .notification.error { border-left-color: var(--error); }
    .notification.success { border-left-color: var(--success); }
    .notification.info { border-left-color: var(--primary); }
    .notification.pending { border-left-color: var(--warning); }
    .transaction-link {
      color: var(--primary);
      text-decoration: underline;
      cursor: pointer;
    }
    @media (max-width: 768px) {
      .card { padding: 1.5rem; }
      .action-buttons { flex-direction: column; }
      button { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>KLY LAUNCHPAD</h1>
    <div class="network-badge"><i class="fab fa-btc"></i> BNB Chain</div>
    <p class="subtitle">The premier platform for token launches on BNB Chain</p>

    <button id="connectWallet"><i class="fas fa-wallet"></i> <span id="buttonText">Connect Wallet</span></button>

    <div id="walletAddress">
      <span id="statusIndicator" class="status-indicator"></span>
      <span id="addressText">Not connected</span>
    </div>

    <div class="token-info" id="tokenInfo" style="display: none;">
      <h3>KLY Token Information</h3>
      <p>Contract: 0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52</p>
      <div class="token-balance" id="tokenBalance">Balance: 0 KLY</div>
    </div>

    <div class="action-buttons" id="actionButtons" style="display: none;">
      <button id="getTokensButton"><i class="fas fa-coins"></i> Get KLY Tokens</button>
      <button id="viewOnExplorer"><i class="fas fa-external-link-alt"></i> Explorer</button>
    </div>
  </div>

  <div id="notification" class="notification"></div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    const TOKEN_CONTRACT_ADDRESS = "0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52";
    const BSC_CHAIN_ID = 56;
    const BSC_RPC_URL = "https://bsc-dataseed.binance.org/";
    const TOKEN_ABI = [
      "function name() view returns (string)",
      "function symbol() view returns (string)",
      "function decimals() view returns (uint8)",
      "function totalSupply() view returns (uint256)",
      "function balanceOf(address account) view returns (uint256)",
      "function transfer(address recipient, uint256 amount) returns (bool)",
      "function buyTokens(uint256 amount) payable",
      "function getPlatformFeeInfo() view returns (address, uint16)",
      "function mintTo(address recipient, uint256 amount) external"
    ];

    const connectButton = document.getElementById("connectWallet");
    const buttonText = document.getElementById("buttonText");
    const walletAddressEl = document.getElementById("addressText");
    const statusIndicator = document.getElementById("statusIndicator");
    const notification = document.getElementById("notification");
    const tokenInfo = document.getElementById("tokenInfo");
    const tokenBalance = document.getElementById("tokenBalance");
    const actionButtons = document.getElementById("actionButtons");
    const getTokensButton = document.getElementById("getTokensButton");
    const viewOnExplorerButton = document.getElementById("viewOnExplorer");

    let provider, signer, tokenContract, currentChainId;

    async function init() {
      await checkConnectedWallet();
      setupEventListeners();
    }

    async function checkConnectedWallet() {
      if (window.ethereum) {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        currentChainId = (await provider.getNetwork()).chainId;
        if (currentChainId !== BSC_CHAIN_ID) await switchToBSC();
        if (window.ethereum.selectedAddress) {
          signer = provider.getSigner();
          const address = await signer.getAddress();
          await updateUI(address);
          await loadTokenInfo();
        }
      }
    }

    async function switchToBSC() {
      try {
        await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: `0x${BSC_CHAIN_ID.toString(16)}` }] });
      } catch (err) {
        if (err.code === 4902) {
          await window.ethereum.request({
            method: 'wallet_addEthereumChain',
            params: [{
              chainId: `0x${BSC_CHAIN_ID.toString(16)}`,
              chainName: 'BNB Smart Chain Mainnet',
              nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
              rpcUrls: [BSC_RPC_URL],
              blockExplorerUrls: ['https://bscscan.com/']
            }]
          });
        } else {
          showNotification("Please switch to BNB Chain", "error");
        }
      }
    }

    function setupEventListeners() {
      connectButton.addEventListener("click", connectWallet);
      getTokensButton.addEventListener("click", mintTokens);
      viewOnExplorerButton.addEventListener("click", () => window.open(`https://bscscan.com/token/${TOKEN_CONTRACT_ADDRESS}`, '_blank'));
      if (window.ethereum) {
        window.ethereum.on('accountsChanged', handleAccountsChanged);
        window.ethereum.on('chainChanged', () => window.location.reload());
      }
    }

    async function connectWallet() {
      if (!window.ethereum) return showNotification("Please install MetaMask", "error");
      provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      currentChainId = (await provider.getNetwork()).chainId;
      if (currentChainId !== BSC_CHAIN_ID) await switchToBSC();
      signer = provider.getSigner();
      const address = await signer.getAddress();
      await updateUI(address);
      await loadTokenInfo();
      showNotification("Wallet connected successfully!", "success");
    }

    async function updateUI(address) {
      walletAddressEl.textContent = `${address.slice(0,6)}...${address.slice(-4)}`;
      walletAddressEl.title = address;
      statusIndicator.classList.add("connected");
      buttonText.textContent = "Connected";
      connectButton.disabled = true;
      tokenInfo.style.display = "block";
      actionButtons.style.display = "flex";
    }

    async function handleAccountsChanged(accounts) {
      if (accounts.length === 0) {
        walletAddressEl.textContent = "Not connected";
        statusIndicator.classList.remove("connected");
        buttonText.textContent = "Connect Wallet";
        connectButton.disabled = false;
        tokenInfo.style.display = "none";
        actionButtons.style.display = "none";
        showNotification("Wallet disconnected", "error");
      } else {
        signer = provider.getSigner();
        await updateUI(accounts[0]);
        await loadTokenInfo();
        showNotification("Account changed", "info");
      }
    }

    async function loadTokenInfo() {
      tokenContract = new ethers.Contract(TOKEN_CONTRACT_ADDRESS, TOKEN_ABI, signer);
      const [symbol, decimals, balance] = await Promise.all([
        tokenContract.symbol(),
        tokenContract.decimals(),
        tokenContract.balanceOf(await signer.getAddress())
      ]);
      tokenBalance.textContent = `Balance: ${ethers.utils.formatUnits(balance, decimals)} ${symbol}`;
    }

    async function mintTokens() {
      try {
        showNotification("Preparing mint...", "pending");
        getTokensButton.disabled = true;
        getTokensButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        const userAddress = await signer.getAddress();
        const tx = await tokenContract.mintTo(userAddress, ethers.utils.parseUnits("100", 18));
        showNotification("Transaction submitted", "pending", tx.hash);
        await tx.wait();
        showNotification("Mint successful!", "success");
        await loadTokenInfo();
      } catch (err) {
        let msg = err.code === 4001 ? "Transaction rejected" : "Minting failed";
        showNotification(msg, "error");
      } finally {
        getTokensButton.disabled = false;
        getTokensButton.innerHTML = '<i class="fas fa-coins"></i> Get KLY Tokens';
      }
    }

    function showNotification(message, type = "info", txHash = null) {
      notification.innerHTML = txHash
        ? `${message}<br><span class="transaction-link" onclick="window.open('https://bscscan.com/tx/${txHash}', '_blank')">View on BscScan</span>`
        : message;
      notification.className = `notification ${type} show`;
      setTimeout(() => notification.classList.remove("show"), 5000);
    }

    window.addEventListener('load', init);
  </script>
</body>
</html>
