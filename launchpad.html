<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KLY Launchpad - Next Generation IDO Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="KLY Launchpad - The premier platform for initial DEX offerings with enhanced security and user experience">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00ffe7;
      --secondary: #ff00aa;
      --bg-dark: #0b0b0b;
      --text-light: #e0e0e0;
      --card-glow: 0 0 15px rgba(0, 255, 231, 0.5);
      --success: #00ff88;
      --warning: #ffaa00;
      --error: #ff3860;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Rajdhani', sans-serif;
      background: linear-gradient(135deg, #050505, #0f0f0f);
      color: var(--text-light);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(0, 255, 231, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 80% 70%, rgba(255, 0, 170, 0.1) 0%, transparent 20%);
      z-index: -1;
    }

    .card {
      background: rgba(15, 15, 15, 0.7);
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 
        0 0 15px rgba(0, 255, 231, 0.5),
        inset 0 0 10px rgba(0, 255, 231, 0.2);
      backdrop-filter: blur(12px);
      width: 90%;
      max-width: 550px;
      text-align: center;
      border: 1px solid rgba(0, 255, 231, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 
        0 0 25px rgba(0, 255, 231, 0.7),
        inset 0 0 15px rgba(0, 255, 231, 0.3);
    }

    .card::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        transparent,
        transparent,
        transparent,
        rgba(0, 255, 231, 0.1),
        transparent,
        transparent,
        transparent
      );
      transform: rotate(30deg);
      animation: shine 6s infinite;
    }

    @keyframes shine {
      0% { transform: rotate(30deg) translate(-30%, -30%); }
      100% { transform: rotate(30deg) translate(30%, 30%); }
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
      text-shadow: 0 0 10px var(--primary);
      margin-bottom: 1.5rem;
      font-size: 2rem;
      letter-spacing: 1px;
    }

    .subtitle {
      color: var(--text-light);
      margin-bottom: 2rem;
      font-size: 1.1rem;
      line-height: 1.5;
      opacity: 0.9;
    }

    button {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      color: #000;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 0.9rem 2rem;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(0, 255, 231, 0.5);
      margin-top: 1rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      z-index: 1;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }

    button:hover {
      box-shadow: 0 0 30px rgba(255, 0, 170, 0.7);
      transform: translateY(-3px);
    }

    button:hover::before {
      opacity: 1;
    }

    button:active {
      transform: translateY(1px);
    }

    button:disabled {
      background: #555;
      box-shadow: none;
      cursor: not-allowed;
      transform: none;
    }

    button:disabled:hover::before {
      opacity: 0;
    }

    #walletAddress {
      margin-top: 1.5rem;
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
      font-size: 0.9rem;
      word-break: break-all;
      padding: 0.8rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 231, 0.2);
      transition: all 0.3s ease;
    }

    #walletAddress:hover {
      background: rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 10px rgba(0, 255, 231, 0.2);
    }

    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 8px;
      background: var(--error);
    }

    .status-indicator.connected {
      background: var(--success);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
    }

    .token-info {
      margin-top: 2rem;
      text-align: left;
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 231, 0.2);
    }

    .token-info h3 {
      color: var(--primary);
      margin-bottom: 0.5rem;
      font-family: 'Orbitron', sans-serif;
    }

    .token-info p {
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .token-balance {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
      font-size: 1.1rem;
      margin-top: 0.5rem;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
    }

    .action-buttons button {
      flex: 1;
      max-width: 200px;
    }

    .features {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
    }

    .feature {
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 231, 0.1);
      width: 45%;
      min-width: 150px;
      transition: all 0.3s ease;
    }

    .feature:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 255, 231, 0.2);
    }

    .feature i {
      color: var(--primary);
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .feature h3 {
      color: var(--primary);
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .feature p {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(15, 15, 15, 0.9);
      border-left: 4px solid var(--primary);
      padding: 1rem;
      border-radius: 4px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transform: translateX(120%);
      transition: transform 0.3s ease;
      z-index: 1000;
      max-width: 300px;
    }

    .notification.show {
      transform: translateX(0);
    }

    .notification.error {
      border-left-color: var(--error);
    }

    .notification.success {
      border-left-color: var(--success);
    }

    @media (max-width: 768px) {
      .card {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .feature {
        width: 100%;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .action-buttons button {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>KLY LAUNCHPAD</h1>
    <p class="subtitle">The premier platform for secure and innovative token launches on the blockchain</p>
    
    <div class="features">
      <div class="feature">
        <i class="fas fa-shield-alt"></i>
        <h3>Secure</h3>
        <p>Audited smart contracts with multi-layer protection</p>
      </div>
      <div class="feature">
        <i class="fas fa-bolt"></i>
        <h3>Fast</h3>
        <p>Low latency transactions with optimized gas usage</p>
      </div>
    </div>
    
    <button id="connectWallet">
      <i class="fas fa-wallet"></i> 
      <span id="buttonText">Connect Wallet</span>
    </button>
    <div id="walletAddress">
      <span id="statusIndicator" class="status-indicator"></span>
      <span id="addressText">Not connected</span>
    </div>
    
    <div class="token-info" id="tokenInfo" style="display: none;">
      <h3>KLY Token Information</h3>
      <p>Contract: 0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52</p>
      <div class="token-balance" id="tokenBalance">Balance: 0 KLY</div>
    </div>
    
    <div class="action-buttons" id="actionButtons" style="display: none;">
      <button id="buyTokens"><i class="fas fa-coins"></i> Buy Tokens</button>
      <button id="viewOnExplorer"><i class="fas fa-external-link-alt"></i> Explorer</button>
    </div>
  </div>

  <div id="notification" class="notification"></div>

  <script>
    // Token contract details
    const TOKEN_CONTRACT_ADDRESS = "0x2e4fEB2Fe668c8Ebe84f19e6c8fE8Cf8131B4E52";
    const TOKEN_ABI = [
      // ERC-20 standard functions
      "function name() view returns (string)",
      "function symbol() view returns (string)",
      "function decimals() view returns (uint8)",
      "function totalSupply() view returns (uint256)",
      "function balanceOf(address account) view returns (uint256)",
      "function transfer(address recipient, uint256 amount) returns (bool)",
      "function allowance(address owner, address spender) view returns (uint256)",
      "function approve(address spender, uint256 amount) returns (bool)",
      "function transferFrom(address sender, address recipient, uint256 amount) returns (bool)",
      
      // Add any custom functions your token might have
      "function buyTokens(uint256 amount) payable",
      "function sellTokens(uint256 amount)"
    ];
    
    // DOM elements
    const connectButton = document.getElementById("connectWallet");
    const buttonText = document.getElementById("buttonText");
    const walletAddressEl = document.getElementById("addressText");
    const statusIndicator = document.getElementById("statusIndicator");
    const notification = document.getElementById("notification");
    const tokenInfo = document.getElementById("tokenInfo");
    const tokenBalance = document.getElementById("tokenBalance");
    const actionButtons = document.getElementById("actionButtons");
    const buyTokensButton = document.getElementById("buyTokens");
    const viewOnExplorerButton = document.getElementById("viewOnExplorer");
    
    // Global variables
    let provider;
    let signer;
    let tokenContract;
    let currentChainId;
    
    // Initialize the application
    async function init() {
      await checkConnectedWallet();
      setupEventListeners();
    }
    
    // Check if wallet is already connected
    async function checkConnectedWallet() {
      if (window.ethereum) {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        currentChainId = await provider.getNetwork().then(network => network.chainId);
        
        if (window.ethereum.selectedAddress) {
          signer = provider.getSigner();
          const address = await signer.getAddress();
          await updateUI(address);
          await loadTokenInfo();
        }
      }
    }
    
    // Setup event listeners
    function setupEventListeners() {
      connectButton.addEventListener("click", connectWallet);
      buyTokensButton.addEventListener("click", buyTokens);
      viewOnExplorerButton.addEventListener("click", viewOnExplorer);
      
      if (window.ethereum) {
        window.ethereum.on('accountsChanged', handleAccountsChanged);
        window.ethereum.on('chainChanged', handleChainChanged);
      }
    }
    
    // Connect wallet handler
    async function connectWallet() {
      try {
        if (!window.ethereum) {
          showNotification("Please install MetaMask or another Web3 wallet", "error");
          walletAddressEl.textContent = "Web3 wallet not detected";
          return;
        }
        
        provider = new ethers.providers.Web3Provider(window.ethereum);
        
        // Request account access
        await provider.send("eth_requestAccounts", []);
        
        // Get signer and address
        signer = provider.getSigner();
        const address = await signer.getAddress();
        
        // Update UI and load token info
        await updateUI(address);
        await loadTokenInfo();
        
        showNotification("Wallet connected successfully!", "success");
        
      } catch (err) {
        console.error("Connection error:", err);
        walletAddressEl.textContent = "Connection failed";
        showNotification(`Connection failed: ${err.message}`, "error");
      }
    }
    
    // Handle account changes
    async function handleAccountsChanged(accounts) {
      if (accounts.length === 0) {
        // Wallet disconnected
        walletAddressEl.textContent = "Not connected";
        statusIndicator.classList.remove("connected");
        buttonText.textContent = "Connect Wallet";
        connectButton.disabled = false;
        tokenInfo.style.display = "none";
        actionButtons.style.display = "none";
        showNotification("Wallet disconnected", "error");
      } else {
        // Account changed
        signer = provider.getSigner();
        await updateUI(accounts[0]);
        await loadTokenInfo();
        showNotification("Account changed", "info");
      }
    }
    
    // Handle chain changes
    async function handleChainChanged(chainId) {
      // Convert chainId from hex to decimal
      currentChainId = parseInt(chainId, 16);
      window.location.reload();
    }
    
    // Update UI after connection
    async function updateUI(address) {
      const shortenedAddress = `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
      walletAddressEl.textContent = shortenedAddress;
      walletAddressEl.title = address; // Show full address on hover
      statusIndicator.classList.add("connected");
      buttonText.textContent = "Connected";
      connectButton.disabled = true;
      
      // Show token info and action buttons
      tokenInfo.style.display = "block";
      actionButtons.style.display = "flex";
    }
    
    // Load token information
    async function loadTokenInfo() {
      try {
        // Initialize token contract
        tokenContract = new ethers.Contract(TOKEN_CONTRACT_ADDRESS, TOKEN_ABI, signer);
        
        // Get token details
        const [name, symbol, decimals, balance] = await Promise.all([
          tokenContract.name(),
          tokenContract.symbol(),
          tokenContract.decimals(),
          tokenContract.balanceOf(await signer.getAddress())
        ]);
        
        // Format balance
        const formattedBalance = ethers.utils.formatUnits(balance, decimals);
        
        // Update UI
        tokenBalance.textContent = `Balance: ${formattedBalance} ${symbol}`;
        
      } catch (err) {
        console.error("Error loading token info:", err);
        showNotification("Error loading token information", "error");
      }
    }
    
    // Buy tokens function
    async function buyTokens() {
      try {
        // Example implementation - adjust based on your token's purchase function
        showNotification("Preparing transaction...", "info");
        
        // You would typically have some input for amount to buy
        const amount = ethers.utils.parseEther("1"); // Example: buy 1 ETH worth of tokens
        
        // Call the token purchase function (adjust based on your contract)
        const tx = await tokenContract.buyTokens(amount, {
          value: amount // Sending ETH with the transaction
        });
        
        showNotification("Transaction sent! Waiting for confirmation...", "info");
        
        // Wait for transaction confirmation
        await tx.wait();
        
        showNotification("Tokens purchased successfully!", "success");
        
        // Refresh balance
        await loadTokenInfo();
        
      } catch (err) {
        console.error("Error buying tokens:", err);
        showNotification(`Error: ${err.message}`, "error");
      }
    }
    
    // View on explorer function
    function viewOnExplorer() {
      let explorerUrl;
      
      // Determine explorer based on chain ID
      switch(currentChainId) {
        case 1: // Ethereum Mainnet
          explorerUrl = `https://etherscan.io/token/${TOKEN_CONTRACT_ADDRESS}`;
          break;
        case 56: // BSC
          explorerUrl = `https://bscscan.com/token/${TOKEN_CONTRACT_ADDRESS}`;
          break;
        case 137: // Polygon
          explorerUrl = `https://polygonscan.com/token/${TOKEN_CONTRACT_ADDRESS}`;
          break;
        // Add more chains as needed
        default:
          explorerUrl = `https://etherscan.io/token/${TOKEN_CONTRACT_ADDRESS}`;
      }
      
      window.open(explorerUrl, '_blank');
    }
    
    // Show notification
    function showNotification(message, type = "info") {
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      
      setTimeout(() => {
        notification.classList.remove("show");
      }, 5000);
    }
    
    // Load Ethers.js dynamically if not already loaded
    if (typeof ethers === 'undefined') {
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js';
      script.onload = init;
      document.head.appendChild(script);
    } else {
      init();
    }
  </script>
</body>
</html>
